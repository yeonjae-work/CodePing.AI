name: ğŸ“š Documentation Configuration

# ë¬¸ì„œ ìë™í™” ì„¤ì • ë° í™˜ê²½ ë³€ìˆ˜
env:
  # ğŸ“– ë¬¸ì„œ ìƒì„± ì„¤ì •
  DOC_PYTHON_VERSION: "3.12"
  DOC_OUTPUT_DIR: "docs-site"
  DOC_ARTIFACTS_RETENTION: 30  # days
  
  # ğŸ”§ API ë¬¸ì„œ ì„¤ì •
  API_DOC_TOOL: "pdoc3"
  SPHINX_THEME: "sphinx_rtd_theme"
  SPHINX_EXTENSIONS: "sphinx.ext.autodoc,sphinx.ext.viewcode,sphinx.ext.napoleon"
  
  # ğŸ“Š ë©”íŠ¸ë¦­ ì„¤ì •
  COVERAGE_THRESHOLD: 70  # minimum coverage percentage
  COMPLEXITY_THRESHOLD: 10  # maximum cyclomatic complexity
  DOCSTRING_THRESHOLD: 80  # minimum docstring coverage
  
  # ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë¬¸ì„œ ì„¤ì •
  MERMAID_THEME: "default"
  DIAGRAM_FORMAT: "svg"
  ARCHITECTURE_DEPTH: 3  # directory tree depth
  
  # ğŸ“ ë³€ê²½ ë¡œê·¸ ì„¤ì •
  CHANGELOG_TAGS_LIMIT: 10  # number of recent tags to include
  CHANGELOG_COMMITS_LIMIT: 100  # number of recent commits to analyze
  
  # ğŸš€ ë°°í¬ ì„¤ì •
  GITHUB_PAGES_BRANCH: "gh-pages"
  GITHUB_PAGES_DIR: "docs"
  
  # ğŸ“± ì•Œë¦¼ ì„¤ì •
  SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
  NOTION_API_KEY: ${{ secrets.NOTION_API_KEY }}

# ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤í… ì •ì˜
on:
  workflow_call:
    inputs:
      doc_type:
        description: 'Type of documentation to generate'
        required: false
        default: 'all'
        type: string
      force_rebuild:
        description: 'Force rebuild all documentation'
        required: false
        default: false
        type: boolean
    outputs:
      documentation_url:
        description: 'URL of the generated documentation'
        value: ${{ jobs.setup.outputs.doc_url }}
      artifacts_uploaded:
        description: 'Whether artifacts were uploaded successfully'
        value: ${{ jobs.setup.outputs.artifacts_success }}

jobs:
  setup:
    name: ğŸ“‹ Documentation Setup
    runs-on: ubuntu-latest
    
    outputs:
      doc_url: ${{ steps.setup.outputs.doc_url }}
      artifacts_success: ${{ steps.setup.outputs.artifacts_success }}
      
    steps:
    - name: ğŸ“‹ Setup documentation environment
      id: setup
      run: |
        echo "ğŸ”§ Setting up documentation environment..."
        
        # GitHub Pages URL ìƒì„±
        REPO_NAME="${{ github.event.repository.name }}"
        OWNER="${{ github.repository_owner }}"
        DOC_URL="https://${OWNER}.github.io/${REPO_NAME}/docs/"
        
        echo "doc_url=${DOC_URL}" >> $GITHUB_OUTPUT
        echo "artifacts_success=false" >> $GITHUB_OUTPUT
        
        echo "ğŸ“š Documentation will be deployed to: ${DOC_URL}"
        echo "ğŸ• Generation started at: $(date -u +"%Y-%m-%d %H:%M:%S UTC")"
        
    - name: ğŸ“Š Environment summary
      run: |
        echo "ğŸ“š Documentation Configuration Summary"
        echo "======================================"
        echo "ğŸ Python Version: ${{ env.DOC_PYTHON_VERSION }}"
        echo "ğŸ“– API Tool: ${{ env.API_DOC_TOOL }}"
        echo "ğŸ¨ Sphinx Theme: ${{ env.SPHINX_THEME }}"
        echo "ğŸ“Š Coverage Threshold: ${{ env.COVERAGE_THRESHOLD }}%"
        echo "ğŸ”§ Complexity Threshold: ${{ env.COMPLEXITY_THRESHOLD }}"
        echo "ğŸ“ Docstring Threshold: ${{ env.DOCSTRING_THRESHOLD }}%"
        echo "ğŸ—ï¸ Architecture Depth: ${{ env.ARCHITECTURE_DEPTH }}"
        echo "ğŸ“‹ Changelog Tags: ${{ env.CHANGELOG_TAGS_LIMIT }}"
        echo "ğŸš€ Target Branch: ${{ env.GITHUB_PAGES_BRANCH }}"
        echo "ğŸ“ Target Directory: ${{ env.GITHUB_PAGES_DIR }}"
        echo ""
        echo "ğŸ”„ Input Parameters:"
        echo "  - Doc Type: ${{ inputs.doc_type || 'all' }}"
        echo "  - Force Rebuild: ${{ inputs.force_rebuild || 'false' }}" 