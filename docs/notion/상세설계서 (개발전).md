# ìƒì„¸ì„¤ê³„ì„œ (ê°œë°œì „)

---
**Database ID**: 21718a4c-52a1-80d3-b24f-e12f28e3d1cf
**Created**: 2025-06-19T12:46:00+00:00
**Last Edited**: 2025-06-26T13:26:00+00:00
**URL**: https://www.notion.so/21718a4c52a180d3b24fe12f28e3d1cf
---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

- **ëª¨ë“ˆ ë§ˆìŠ¤í„°**: relation
  - ì—°ê²° ëŒ€ìƒ: `21b18a4c-52a1-802c-b71b-fe1b96bc35b0`
- **ì§„í–‰ë¥ **: number
- **ìƒíƒœ**: select
  - ì˜µì…˜: ê³„íš, ì„¤ê³„ì¤‘, ê²€í† ì¤‘, ìŠ¹ì¸ì™„ë£Œ, ìˆ˜ì •í•„ìš”, ë¯¸ë°˜ì˜, MVP ì™„ë£Œ, ì„¤ê³„ì™„ë£Œ, ê°œë°œì¤‘, ì™„ë£Œ, ê°œë°œì™„ë£Œ
- **ì˜ˆìƒì‘ì—…ì‹œê°„**: number
- **ê°œë°œLLM**: select
  - ì˜µì…˜: o3, claude-4-sonnet
- **ìƒì„±ì¼**: date
- **ê°œë°œì**: people
- **ì „ì²´ í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„° DB**: relation
  - ì—°ê²° ëŒ€ìƒ: `20018a4c-52a1-80ef-ba02-d83fd578ccdf`
- **í”„ë¡¬í”„íŠ¸**: relation
  - ì—°ê²° ëŒ€ìƒ: `21718a4c-52a1-80f6-9108-f924a9048aa3`
- **ì™„ë£Œì˜ˆì •ì¼**: date
- **ìš°ì„ ìˆœìœ„**: select
  - ì˜µì…˜: ë†’ìŒ, ë³´í†µ, ë‚®ìŒ
- **ì´ë¦„**: title

## ë°ì´í„°ë² ì´ìŠ¤ ë‚´ìš© (5ê°œ í•­ëª©)

### 1. DiffAnalyzer ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ
- **ëª¨ë“ˆ ë§ˆìŠ¤í„°**: 1ê°œ ì—°ê²°
- **ì§„í–‰ë¥ **: None
- **ìƒíƒœ**: ì„¤ê³„ì™„ë£Œ
- **ì˜ˆìƒì‘ì—…ì‹œê°„**: None
- **ê°œë°œLLM**: claude-4-sonnet
- **ìƒì„±ì¼**: 2025-06-26
- **ê°œë°œì**: YunJeong Kim(ê´€ë¦¬ì)
- **ì „ì²´ í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„° DB**: 1ê°œ ì—°ê²°
- **í”„ë¡¬í”„íŠ¸**: 1ê°œ ì—°ê²°
- **ìš°ì„ ìˆœìœ„**: ë†’ìŒ
- **ì´ë¦„**: DiffAnalyzer ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ
- **ë§í¬**: [DiffAnalyzer ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ](https://www.notion.so/DiffAnalyzer-21e18a4c52a1817cbb98cb54411f800e)

**ğŸ“„ í˜ì´ì§€ ë‚´ìš©:**
  # ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
  ---
  ### ì „ì²´ êµ¬ì¡°ë„
  ```plain text
  [GitDataParser] â†’ [DiffAnalyzer ëª¨ë“ˆ] â†’ [DataStorage]
                         â†“
                 [ì½”ë“œ ë¶„ì„ ë° ì˜ë¯¸ ì¶”ì¶œ]
                         â†“
                [LLMServiceì—ì„œ í™œìš©]

  ```
  ### ê¸°ìˆ  ìŠ¤íƒ
  - **ë°±ì—”ë“œ**: Python 3.11+, FastAPI, GitPython, python-diff-parser
  - **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL, SQLAlchemy ORM
  - **AI/ML**: tree-sitter (ì½”ë“œ íŒŒì‹±), pygments (ì–¸ì–´ ê°ì§€), radon (ë³µì¡ë„ ê³„ì‚°)
  - **ê¸°íƒ€**: Docker, Pydantic, pytest
  ---
  ## ğŸ“¦ í´ë˜ìŠ¤ ì„¤ê³„
  ### í´ë˜ìŠ¤ 1: DiffAnalyzer (ë©”ì¸ í´ë˜ìŠ¤)
  ### ì—­í• ê³¼ ì±…ì„
  - ëª¨ë“ˆì˜ ë©”ì¸ ì§„ì…ì  ë° ì „ì²´ ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ì¡°ìœ¨
  - GitDataParserì—ì„œ íŒŒì‹±ëœ diff ë°ì´í„°ë¥¼ ë°›ì•„ ì˜ë¯¸ì  ë¶„ì„ ìˆ˜í–‰
  - ì½”ë“œ ë³µì¡ë„, í’ˆì§ˆ ë©”íŠ¸ë¦­, êµ¬ì¡°ì  ë³€ê²½ì‚¬í•­ ë¶„ì„
  - ë‚´ë¶€ í—¬í¼ í´ë˜ìŠ¤ë“¤ì„ ì¡°ìœ¨í•˜ì—¬ ì¢…í•©ì ì¸ ì½”ë“œ ë¶„ì„ ê²°ê³¼ ìƒì„±
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | í•„ìˆ˜ì—¬ë¶€ | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | parsed_diff | ParsedDiff | GitDataParserì—ì„œ íŒŒì‹±ëœ diff ë°ì´í„° | í•„ìˆ˜ | ParsedDiff(...) |
  | commit_metadata | CommitMetadata | ì»¤ë°‹ ë©”íƒ€ë°ì´í„° | í•„ìˆ˜ | CommitMetadata(...) |
  | repository_context | RepositoryContext | ì €ì¥ì†Œ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ | ì„ íƒ | RepositoryContext(...) |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | analyzed_files | List[AnalyzedFile] | íŒŒì¼ë³„ ë¶„ì„ ê²°ê³¼ | [...] |
  | total_additions | int | ì´ ì¶”ê°€ëœ ë¼ì¸ ìˆ˜ | 127 |
  | total_deletions | int | ì´ ì‚­ì œëœ ë¼ì¸ ìˆ˜ | 43 |
  | complexity_delta | float | ë³µì¡ë„ ë³€í™”ëŸ‰ | +1.2 |
  | language_breakdown | Dict[str, int] | ì–¸ì–´ë³„ ë³€ê²½ ë¼ì¸ ìˆ˜ | {"python": 89, "js": 38} |
  | binary_files_changed | List[str] | ë³€ê²½ëœ ë°”ì´ë„ˆë¦¬ íŒŒì¼ | ["image.png"] |
  | functions_added | List[str] | ì¶”ê°€ëœ í•¨ìˆ˜ëª… | ["authenticate"] |
  | functions_modified | List[str] | ìˆ˜ì •ëœ í•¨ìˆ˜ëª… | ["login"] |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  **ì´ˆê¸°í™”**
  1. ë‚´ë¶€ í—¬í¼ í´ë˜ìŠ¤ë“¤ ì´ˆê¸°í™”
  1. ì–¸ì–´ë³„ ë¶„ì„ê¸° ì„¤ì •
  1. ë³µì¡ë„ ê³„ì‚°ê¸° ì¤€ë¹„
  **ë°ì´í„° ì²˜ë¦¬**
  1. ParsedDiff ë°ì´í„° ê²€ì¦
  1. LanguageDetectorë¡œ ì–¸ì–´ë³„ ë¶„ë¥˜
  1. CodeComplexityAnalyzerë¡œ ë³µì¡ë„ ë¶„ì„
  1. StructuralChangeAnalyzerë¡œ êµ¬ì¡°ì  ë³€ê²½ ë¶„ì„
  1. ê²°ê³¼ í†µí•© ë° ì§‘ê³„
  **ê²°ê³¼ ë°˜í™˜**
  1. ë¶„ì„ ê²°ê³¼ êµ¬ì¡°í™”
  1. ë©”íŠ¸ë¦­ ì§‘ê³„
  1. DiffAnalysisResult ê°ì²´ ë°˜í™˜
  ### í•µì‹¬ ë©”ì„œë“œ
  - `analyze(parsed_diff: ParsedDiff, commit_metadata: CommitMetadata) -> DiffAnalysisResult`: ë©”ì¸ ë¶„ì„ ë¡œì§
  - `_orchestrate_analysis(parsed_diff: ParsedDiff) -> AnalysisResult`: ë‚´ë¶€ ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ì¡°ìœ¨
  - `_aggregate_results(file_analyses: List[FileAnalysis]) -> Summary`: ê²°ê³¼ ì§‘ê³„
  ---
  ### í´ë˜ìŠ¤ 2: LanguageAnalyzer (í—¬í¼ í´ë˜ìŠ¤)
  ### ì—­í• ê³¼ ì±…ì„
  - íŒŒì‹±ëœ íŒŒì¼ ë³€ê²½ì‚¬í•­ì„ ì–¸ì–´ë³„ë¡œ ë¶„ë¥˜
  - ì–¸ì–´ë³„ íŠ¹í™”ëœ ë¶„ì„ ê·œì¹™ ì ìš©
  - ì§€ì›ë˜ì§€ ì•ŠëŠ” ì–¸ì–´ í•„í„°ë§
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | í•„ìˆ˜ì—¬ë¶€ | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | file_changes | List[FileChange] | íŒŒì‹±ëœ íŒŒì¼ ë³€ê²½ì‚¬í•­ | í•„ìˆ˜ | [...] |
  | repository_info | RepositoryInfo | ì €ì¥ì†Œ ì •ë³´ | í•„ìˆ˜ | RepositoryInfo(...) |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | language_groups | Dict[str, List[FileChange]] | ì–¸ì–´ë³„ íŒŒì¼ ê·¸ë£¹ | {"python": [...], "js": [...]} |
  | supported_files | List[FileChange] | ë¶„ì„ ì§€ì› íŒŒì¼ ëª©ë¡ | [...] |
  | unsupported_files | List[FileChange] | ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ ëª©ë¡ | [...] |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  **ì´ˆê¸°í™”**
  1. ì–¸ì–´ ë§¤í•‘ í…Œì´ë¸” ë¡œë“œ
  1. ì§€ì› ì–¸ì–´ ëª©ë¡ ì„¤ì •
  **ë°ì´í„° ì²˜ë¦¬**
  1. íŒŒì¼ í™•ì¥ì ê¸°ë°˜ ì–¸ì–´ ë¶„ë¥˜
  1. ì§€ì› ì—¬ë¶€ ê²€ì¦
  1. ì–¸ì–´ë³„ ê·¸ë£¹í™”
  **ê²°ê³¼ ë°˜í™˜**
  1. ì–¸ì–´ë³„ íŒŒì¼ ê·¸ë£¹ ìƒì„±
  1. LanguageClassificationResult ë°˜í™˜
  ### í•µì‹¬ ë©”ì„œë“œ
  - `classify_by_language(file_changes: List[FileChange]) -> LanguageClassificationResult`: ì–¸ì–´ë³„ ë¶„ë¥˜
  - `_detect_language(file_path: str) -> str`: íŒŒì¼ ì–¸ì–´ ê°ì§€
  - `_is_supported_language(language: str) -> bool`: ì§€ì› ì–¸ì–´ ì—¬ë¶€ í™•ì¸
  ---
  ### í´ë˜ìŠ¤ 3: CodeComplexityAnalyzer (í—¬í¼ í´ë˜ìŠ¤)
  ### ì—­í• ê³¼ ì±…ì„
  - ì–¸ì–´ë³„ ì½”ë“œ ë³µì¡ë„ ë¶„ì„
  - ë³€ê²½ ì „í›„ ë³µì¡ë„ ë¹„êµ
  - ë³µì¡ë„ ë³€í™”ëŸ‰ ë° ì˜í–¥ë„ ê³„ì‚°
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | í•„ìˆ˜ì—¬ë¶€ | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | file_change | FileChange | íŒŒì¼ ë³€ê²½ì‚¬í•­ (ë³€ê²½ ì „í›„ ì½”ë“œ í¬í•¨) | í•„ìˆ˜ | FileChange(...) |
  | language | str | í”„ë¡œê·¸ë˜ë° ì–¸ì–´ | í•„ìˆ˜ | "python" |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | complexity_before | float | ë³€ê²½ ì „ ë³µì¡ë„ | 2.1 |
  | complexity_after | float | ë³€ê²½ í›„ ë³µì¡ë„ | 3.3 |
  | complexity_delta | float | ë³µì¡ë„ ë³€í™”ëŸ‰ | +1.2 |
  | impact_level | str | ì˜í–¥ë„ ìˆ˜ì¤€ | "medium" |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  **ì´ˆê¸°í™”**
  1. radon ë³µì¡ë„ ê³„ì‚°ê¸° ì„¤ì •
  1. ì–¸ì–´ë³„ ê°€ì¤‘ì¹˜ ë¡œë“œ
  **ë°ì´í„° ì²˜ë¦¬**
  1. ë³€ê²½ ì „í›„ ì½”ë“œ ë³µì¡ë„ ê³„ì‚°
  1. ë¸íƒ€ ê³„ì‚°
  1. ì–¸ì–´ë³„ ê°€ì¤‘ì¹˜ ì ìš©
  **ê²°ê³¼ ë°˜í™˜**
  1. ComplexityMetrics ê°ì²´ ë°˜í™˜
  ### í•µì‹¬ ë©”ì„œë“œ
  - `analyze_complexity(file_change: FileChange, language: str) -> ComplexityAnalysisResult`: ë³µì¡ë„ ë¶„ì„
  - `_calculate_single_complexity(code: str, language: str) -> float`: ë‹¨ì¼ ì½”ë“œ ë³µì¡ë„ ê³„ì‚°
  - `_determine_impact_level(delta: float) -> str`: ë³µì¡ë„ ë³€í™” ì˜í–¥ë„ íŒì •
  ---
  ### í´ë˜ìŠ¤ 4: StructuralChangeAnalyzer (í—¬í¼ í´ë˜ìŠ¤)
  ### ì—­í• ê³¼ ì±…ì„
  - AST ê¸°ë°˜ êµ¬ì¡°ì  ë³€ê²½ì‚¬í•­ ë¶„ì„
  - í•¨ìˆ˜/í´ë˜ìŠ¤ ë ˆë²¨ ë³€ê²½ ì¶”ì 
  - í…ŒìŠ¤íŠ¸ íŒŒì¼ ë³€ê²½ ê°ì§€
  - Import/Dependency ë³€ê²½ ë¶„ì„
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | í•„ìˆ˜ì—¬ë¶€ | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | file_change | FileChange | íŒŒì¼ ë³€ê²½ì‚¬í•­ | í•„ìˆ˜ | FileChange(...) |
  | language | str | í”„ë¡œê·¸ë˜ë° ì–¸ì–´ | í•„ìˆ˜ | "python" |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | functions_added | List[str] | ì¶”ê°€ëœ í•¨ìˆ˜ | ["auth_user"] |
  | functions_modified | List[str] | ìˆ˜ì •ëœ í•¨ìˆ˜ | ["login"] |
  | functions_deleted | List[str] | ì‚­ì œëœ í•¨ìˆ˜ | ["old_login"] |
  | classes_added | List[str] | ì¶”ê°€ëœ í´ë˜ìŠ¤ | ["UserAuth"] |
  | classes_modified | List[str] | ìˆ˜ì •ëœ í´ë˜ìŠ¤ | ["User"] |
  | imports_changed | List[str] | ë³€ê²½ëœ import | ["requests"] |
  | is_test_file | bool | í…ŒìŠ¤íŠ¸ íŒŒì¼ ì—¬ë¶€ | false |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  **ì´ˆê¸°í™”**
  1. tree-sitter íŒŒì„œ ì„¤ì •
  1. í•¨ìˆ˜/í´ë˜ìŠ¤ ì¶”ì¶œê¸° ì¤€ë¹„
  **ë°ì´í„° ì²˜ë¦¬**
  1. AST íŒŒì‹±
  1. í•¨ìˆ˜/í´ë˜ìŠ¤ ì¶”ì¶œ
  1. ë³€ê²½ì‚¬í•­ ë¶„ë¥˜
  **ê²°ê³¼ ë°˜í™˜**
  1. FileAnalysis ê°ì²´ ë°˜í™˜
  ### í•µì‹¬ ë©”ì„œë“œ
  - `analyze_structural_changes(file_change: FileChange, language: str) -> StructuralAnalysisResult`: êµ¬ì¡°ì  ë³€ê²½ ë¶„ì„
  - `_extract_functions_from_ast(ast: ASTNode) -> List[Function]`: ASTì—ì„œ í•¨ìˆ˜ ì¶”ì¶œ
  - `_extract_classes_from_ast(ast: ASTNode) -> List[Class]`: ASTì—ì„œ í´ë˜ìŠ¤ ì¶”ì¶œ
  - `_detect_test_file(file_path: str) -> bool`: í…ŒìŠ¤íŠ¸ íŒŒì¼ ê°ì§€
  - `_analyze_import_changes(before_ast: ASTNode, after_ast: ASTNode) -> List[str]`: Import ë³€ê²½ ë¶„ì„
  ---
  ## ğŸ”„ ë°ì´í„° íë¦„ë„
  ### ì „ì²´ ë°ì´í„° í”Œë¡œìš°
  ```plain text
  [GitDataParser] â†’ [êµ¬ì¡°í™”ëœ diff ë°ì´í„°] â†’ [DiffAnalyzer ëª¨ë“ˆ] â†’ [ì½”ë“œ ë¶„ì„ ê²°ê³¼] â†’ [DataStorage]

  ```
  ### ìƒì„¸ ë°ì´í„° íë¦„
  ### Step 1: ë°ì´í„° ì…ë ¥
  - **Source**: GitDataParser ëª¨ë“ˆ
  - **Format**: êµ¬ì¡°í™”ëœ ParsedDiff ê°ì²´ + CommitMetadata
  - **Validation**: íŒŒì‹±ëœ ë°ì´í„° êµ¬ì¡° ê²€ì¦
  ### Step 2: DiffAnalyzer ëª¨ë“ˆ ë‚´ë¶€ ì²˜ë¦¬
  - **LanguageAnalyzer**: íŒŒì¼ë³„ ì–¸ì–´ ë¶„ë¥˜ ë° ì§€ì› ì—¬ë¶€ í™•ì¸
  - **CodeComplexityAnalyzer**: ì–¸ì–´ë³„ ë³µì¡ë„ ë¶„ì„
  - **StructuralChangeAnalyzer**: AST ê¸°ë°˜ êµ¬ì¡°ì  ë³€ê²½ ë¶„ì„
  - **DiffAnalyzer**: ë¶„ì„ ê²°ê³¼ í†µí•© ë° ì§‘ê³„
  ### Step 3: ìµœì¢… ì¶œë ¥
  - **Target**: DataStorage ëª¨ë“ˆ
  - **Format**: DiffAnalysisResult ê°ì²´ (ì½”ë“œ ë¶„ì„ ê²°ê³¼)
  - **ë‹¤ìŒ ë‹¨ê³„**: LLMServiceì—ì„œ ìì—°ì–´ ìš”ì•½ ìƒì„±ì— í™œìš©
  ---
  ## ğŸ”— ë‹¤ë¥¸ ëª¨ë“ˆê³¼ì˜ ì—°ê³„
  ### Input ì¸í„°í˜ì´ìŠ¤
  - **GitDataParser**: êµ¬ì¡°í™”ëœ diff ë°ì´í„° ë° ì»¤ë°‹ ë©”íƒ€ë°ì´í„° ì œê³µ
  ### Output ì¸í„°í˜ì´ìŠ¤
  - **DataStorage**: ì½”ë“œ ë¶„ì„ ê²°ê³¼ ì €ì¥ì„ ìœ„í•œ ë°ì´í„° ì œê³µ
  - **LLMService**: ìì—°ì–´ ìš”ì•½ ìƒì„±ì„ ìœ„í•œ ë¶„ì„ëœ ì½”ë“œ ë°ì´í„° ì œê³µ
  - **DataAggregator**: ê°œë°œìë³„/í”„ë¡œì íŠ¸ë³„ ì§‘ê³„ë¥¼ ìœ„í•œ ì½”ë“œ ë¶„ì„ ë°ì´í„° ì œê³µ
  ### ë°ì´í„° ëª¨ë¸ ì •ì˜
  ```python
  @dataclass
  class DiffAnalysisResult:
      """DiffAnalyzer ëª¨ë“ˆì˜ ìµœì¢… ì¶œë ¥ ë°ì´í„° ëª¨ë¸"""
      commit_sha: str
      repository_name: str
      author_email: str
      timestamp: datetime

      # íŒŒì¼ ë³€ê²½ í†µê³„
      total_files_changed: int
      total_additions: int
      total_deletions: int

      # ì–¸ì–´ë³„ ë¶„ì„
      language_breakdown: Dict[str, LanguageStats]

      # êµ¬ì¡°ì  ë³€ê²½ì‚¬í•­
      functions_added: List[str]
      functions_modified: List[str]
      functions_deleted: List[str]
      classes_added: List[str]
      classes_modified: List[str]

      # í’ˆì§ˆ ë©”íŠ¸ë¦­
      complexity_delta: float
      test_coverage_delta: float

      # íŒŒì¼ë³„ ìƒì„¸ ë¶„ì„
      file_analyses: List[FileAnalysis]

      # ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë³€ê²½
      binary_files_changed: List[str]

  ```
  ---
  ## âš™ï¸ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­
  ### í™˜ê²½ ì„¤ì •
  - **ê°œë°œí™˜ê²½**: Python 3.11+, Poetry íŒ¨í‚¤ì§€ ê´€ë¦¬
  - **ì˜ì¡´ì„±**:
  - **í™˜ê²½ë³€ìˆ˜**:
  ### í•µì‹¬ ë¡œì§
  ### ì•Œê³ ë¦¬ì¦˜ 1: ì–¸ì–´ë³„ íŒŒì¼ ë¶„ë¥˜ ì•Œê³ ë¦¬ì¦˜
  ```python
  def classify_files_by_language(file_changes: List[FileChange]) -> Dict[str, List[FileChange]]:
      """
      íŒŒì‹±ëœ íŒŒì¼ ë³€ê²½ì‚¬í•­ì„ ì–¸ì–´ë³„ë¡œ ë¶„ë¥˜
      """
      language_groups = {}

      for file_change in file_changes:
          language = detect_language_from_path(file_change.file_path)

          if is_supported_language(language):
              if language not in language_groups:
                  language_groups[language] = []
              language_groups[language].append(file_change)

      return language_groups

  ```
  ### ì•Œê³ ë¦¬ì¦˜ 2: AST ê¸°ë°˜ êµ¬ì¡°ì  ë³€ê²½ ë¶„ì„
  ```python
  def analyze_structural_changes(file_change: FileChange, language: str) -> StructuralChanges:
      """
      ASTë¥¼ ì´ìš©í•œ í•¨ìˆ˜/í´ë˜ìŠ¤ ë ˆë²¨ ë³€ê²½ì‚¬í•­ ë¶„ì„
      """
      before_ast = parse_ast(file_change.content_before, language) if file_change.content_before else None
      after_ast = parse_ast(file_change.content_after, language) if file_change.content_after else None

      if not after_ast:  # íŒŒì¼ ì‚­ì œ
          return StructuralChanges(deleted_functions=extract_functions(before_ast))

      if not before_ast:  # ìƒˆ íŒŒì¼
          return StructuralChanges(added_functions=extract_functions(after_ast))

      # ë³€ê²½ ë¶„ì„
      before_functions = extract_functions(before_ast)
      after_functions = extract_functions(after_ast)

      added = [f for f in after_functions if f not in before_functions]
      deleted = [f for f in before_functions if f not in after_functions]
      modified = analyze_function_modifications(before_functions, after_functions)

      return StructuralChanges(
          added_functions=added,
          deleted_functions=deleted,
          modified_functions=modified
      )
  ```(before_code: str, after_code: str, language: str) -> float:
      """
      ì½”ë“œ ë³€ê²½ ì „í›„ì˜ ë³µì¡ë„ ë³€í™”ëŸ‰ ê³„ì‚°
      """
      before_complexity = calculate_cyclomatic_complexity(before_code, language)
      after_complexity = calculate_cyclomatic_complexity(after_code, language)

      # ê°€ì¤‘ì¹˜ ì ìš©: ìƒˆë¡œ ì¶”ê°€ëœ ì½”ë“œì— ë” ë†’ì€ ê°€ì¤‘ì¹˜
      if not before_code:  # ìƒˆ íŒŒì¼
          return after_complexity * 1.2
      elif not after_code:  # ì‚­ì œëœ íŒŒì¼
          return -before_complexity
      else:  # ìˆ˜ì •ëœ íŒŒì¼
          return after_complexity - before_complexity

  ```
  ### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
  - **ë³‘ëª© ì§€ì **: ëŒ€ìš©ëŸ‰ diff íŒŒì‹±, tree-sitter AST ìƒì„±, ë³µì¡ë„ ê³„ì‚°
  - **ìµœì í™” ë°©ì•ˆ**:
  - **í™•ì¥ì„±**: Redis ìºì‹±ìœ¼ë¡œ ë¶„ì„ ê²°ê³¼ ì €ì¥, ì›Œì»¤ íë¥¼ í†µí•œ ë¶„ì‚° ì²˜ë¦¬
  ---
  ## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš
  ### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
  - â˜ **DiffAnalyzer** ë©”ì¸ í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  - â˜ **DiffParser** í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  - â˜ **LanguageDetector** í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  - â˜ **ComplexityCalculator** í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  - â˜ **FileChangeAnalyzer** í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  ### í†µí•© í…ŒìŠ¤íŠ¸
  - â˜ GitDataParser â†’ DiffAnalyzer â†’ DataStorage ì „ì²´ í”Œë¡œìš°
  - â˜ ì‹¤ì œ í”„ë¡œì íŠ¸ diff ë°ì´í„°ë¥¼ ì´ìš©í•œ ì¢…ë‹¨ê°„ í…ŒìŠ¤íŠ¸
  - â˜ ë‹¤ë¥¸ ëª¨ë“ˆê³¼ì˜ ì¸í„°í˜ì´ìŠ¤ í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸
  ### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  - â˜ ëŒ€ìš©ëŸ‰ diff (1000+ íŒŒì¼) ì²˜ë¦¬ ì„±ëŠ¥
  - â˜ ë™ì‹œ ìš”ì²­ ì²˜ë¦¬ ëŠ¥ë ¥ (100 req/sec)
  - â˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™” ê²€ì¦
  - â˜ AST íŒŒì‹± ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
  ### í…ŒìŠ¤íŠ¸ ë°ì´í„°
  - **ì‹¤ì œ í”„ë¡œì íŠ¸**: ë‹¤ì–‘í•œ í¬ê¸°ì˜ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ diff
  - **ì–¸ì–´ ë‹¤ì–‘ì„±**: Python, JavaScript, Java, Go, Rust ë“±
  - **íŠ¹ìˆ˜ ì¼€ì´ìŠ¤**: ë°”ì´ë„ˆë¦¬ íŒŒì¼, ëŒ€ìš©ëŸ‰ íŒŒì¼, íŠ¹ìˆ˜ ë¬¸ì í¬í•¨ íŒŒì¼
  ---
  ## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…
  ### í•µì‹¬ ë©”íŠ¸ë¦­
  - **ì²˜ë¦¬ ì„±ëŠ¥**: diff íŒŒì‹± ì‹œê°„, ë¶„ì„ ì™„ë£Œ ì‹œê°„, AST ìƒì„± ì‹œê°„
  - **ì •í™•ì„±**: íŒŒì‹± ì„±ê³µë¥ , ì–¸ì–´ ê°ì§€ ì •í™•ë„, ë³µì¡ë„ ê³„ì‚° ì •í™•ì„±
  - **ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤**: CPU ì‚¬ìš©ë¥ , ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰, íŒŒì¼ I/O ì„±ëŠ¥
  ### ë¡œê·¸ ë ˆë²¨ë³„ ì •ë³´
  - **DEBUG**: ìƒì„¸í•œ diff íŒŒì‹± ê³¼ì •, AST êµ¬ì¡°, ë³µì¡ë„ ê³„ì‚° ì„¸ë¶€ì‚¬í•­
  - **INFO**: ë¶„ì„ ì‹œì‘/ì™„ë£Œ, ì£¼ìš” ë©”íŠ¸ë¦­, íŒŒì¼ ì²˜ë¦¬ í†µê³„
  - **WARNING**: íŒŒì‹± ì‹¤íŒ¨, ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´, ëŒ€ìš©ëŸ‰ íŒŒì¼ ê±´ë„ˆë›°ê¸°
  - **ERROR**: ì‹œìŠ¤í…œ ì˜¤ë¥˜, AST íŒŒì‹± ì‹¤íŒ¨, ë©”ëª¨ë¦¬ ë¶€ì¡±
  ### ì•Œë¦¼ ë° ê²½ê³  ì‹œìŠ¤í…œ
  - **ì„±ëŠ¥ ê²½ê³ **: ì²˜ë¦¬ ì‹œê°„ ì„ê³„ê°’ ì´ˆê³¼ (30ì´ˆ ì´ìƒ)
  - **í’ˆì§ˆ ê²½ê³ **: ë³µì¡ë„ ê¸‰ì¦ ê°ì§€ (ì´ì „ ëŒ€ë¹„ 50% ì´ìƒ ì¦ê°€)
  - **ìš©ëŸ‰ ê²½ê³ **: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì„ê³„ê°’ ì´ˆê³¼ (1GB ì´ìƒ)
  ---
  ## ğŸ“š ì°¸ê³  ë¬¸ì„œ ë° ì˜ì¡´ì„±
  ### ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì„œ
  - **tree-sitter**: https://tree-sitter.github.io/tree-sitter/
  - **GitPython**: https://gitpython.readthedocs.io/
  - **radon**: https://radon.readthedocs.io/
  - **pygments**: https://pygments.org/docs/
  ### ì½”ë“œ í’ˆì§ˆ ê¸°ì¤€
  - **PEP 8**: Python ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ
  - **Cyclomatic Complexity**: 10 ì´í•˜ ê¶Œì¥, 15 ì´ìƒ ê²½ê³ 
  - **Test Coverage**: ì‹ ê·œ ì½”ë“œ 80% ì´ìƒ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ
  ### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
  - **ì…ë ¥ ê²€ì¦**: diff í…ìŠ¤íŠ¸ í¬ê¸° ì œí•œ, ì•…ì„± ì½”ë“œ íŒ¨í„´ ê²€ì‚¬
  - **ë©”ëª¨ë¦¬ ë³´í˜¸**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§, OOM ë°©ì§€
  - **íŒŒì¼ ì ‘ê·¼**: ì•ˆì „í•œ íŒŒì¼ ê²½ë¡œ ì²˜ë¦¬, ë””ë ‰í† ë¦¬ ìˆœíšŒ ê³µê²© ë°©ì§€
  ---
  ì´ ìƒì„¸ì„¤ê³„ì„œëŠ” DiffAnalyzer ëª¨ë“ˆì´ **ìˆœìˆ˜í•œ ë¶„ì„ ì—”ì§„**ìœ¼ë¡œì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ë¥¼ ì œê³µí•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“ˆ ë‚´ë¶€ì˜ í´ë˜ìŠ¤ë“¤ì€ ëª…í™•í•œ ì—­í•  ë¶„ë‹´ì„ í†µí•´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë©°, ë‹¤ë¥¸ ëª¨ë“ˆê³¼ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ëŠìŠ¨í•œ ê²°í•©ì„ ìœ ì§€í•©ë‹ˆë‹¤.

### 2. HTTPAPIClient ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ
- **ëª¨ë“ˆ ë§ˆìŠ¤í„°**: 1ê°œ ì—°ê²°
- **ì§„í–‰ë¥ **: None
- **ìƒíƒœ**: ê°œë°œì™„ë£Œ
- **ì˜ˆìƒì‘ì—…ì‹œê°„**: None
- **ê°œë°œLLM**: claude-4-sonnet
- **ìƒì„±ì¼**: 2025-06-26
- **ê°œë°œì**: YunJeong Kim(ê´€ë¦¬ì)
- **ì „ì²´ í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„° DB**: 1ê°œ ì—°ê²°
- **í”„ë¡¬í”„íŠ¸**: 1ê°œ ì—°ê²°
- **ìš°ì„ ìˆœìœ„**: ë†’ìŒ
- **ì´ë¦„**: HTTPAPIClient ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ
- **ë§í¬**: [HTTPAPIClient ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ](https://www.notion.so/HTTPAPIClient-21e18a4c52a1814fb262e696d641ef59)

**ğŸ“„ í˜ì´ì§€ ë‚´ìš©:**
  # HTTPAPIClient ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ
  ## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
  ---
  ### ì „ì²´ êµ¬ì¡°ë„
  ```plain text
  HTTPAPIClient (ë²”ìš© HTTP í´ë¼ì´ì–¸íŠ¸)
      â†“
  [GitHub API Client] â†’ [GitLab API Client] â†’ [Generic API Client]
      â†“                      â†“                      â†“
  [API ì‘ë‹µ ì²˜ë¦¬]     [API ì‘ë‹µ ì²˜ë¦¬]     [API ì‘ë‹µ ì²˜ë¦¬]

  ```
  ### ê¸°ìˆ  ìŠ¤íƒ
  - **ë°±ì—”ë“œ**: Python 3.11+, aiohttp, httpx
  - **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL (ì—°ê²° ì •ë³´ ì €ì¥)
  - **ê¸°íƒ€**: Pydantic (ë°ì´í„° ê²€ì¦), tenacity (ì¬ì‹œë„ ë¡œì§), Redis (ìºì‹±)
  ---
  ## ğŸ“¦ í´ë˜ìŠ¤ ì„¤ê³„
  ### í´ë˜ìŠ¤ 1: HTTPAPIClient
  ### ì—­í• ê³¼ ì±…ì„
  - GitHub API, GitLab API ë“± ì™¸ë¶€ API í˜¸ì¶œì„ ë‹´ë‹¹í•˜ëŠ” ë²”ìš© HTTP í´ë¼ì´ì–¸íŠ¸
  - webhookì—ì„œ ì¶”ê°€ ìƒì„¸ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš° í•´ë‹¹ í”Œë«í¼ì˜ APIë¥¼ í˜¸ì¶œí•˜ì—¬ diff ìƒì„¸ì •ë³´ ë“±ì„ ê°€ì ¸ì˜´
  - ì¸ì¦, ì¬ì‹œë„, ì‘ë‹µ ì²˜ë¦¬, ì—ëŸ¬ í•¸ë“¤ë§ ë“± HTTP í†µì‹ ì˜ ëª¨ë“  ì¸¡ë©´ì„ ê´€ë¦¬
  - ë‹¤ì–‘í•œ Git í”Œë«í¼ í™•ì¥ì„ ìœ„í•œ ë²”ìš© ì¸í„°í˜ì´ìŠ¤ ì œê³µ
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | platform | str | Y | API í”Œë«í¼ ìœ í˜• | "github", "gitlab" |
  | endpoint | str | Y | API ì—”ë“œí¬ì¸íŠ¸ | "/repos/{owner}/{repo}/commits/{sha}" |
  | method | str | Y | HTTP ë©”ì„œë“œ | "GET", "POST" |
  | headers | dict | N | ìš”ì²­ í—¤ë” | {"Authorization": "token xxx"} |
  | params | dict | N | ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ | {"per_page": 100} |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | status_code | int | HTTP ìƒíƒœ ì½”ë“œ | 200 |
  | data | dict | ì‘ë‹µ ë°ì´í„° | API ì‘ë‹µ JSON |
  | success | bool | ì„±ê³µ ì—¬ë¶€ | True |
  | error_message | str | ì—ëŸ¬ ë©”ì‹œì§€ | "Rate limit exceeded" |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  ## ì´ˆê¸°í™”
  1. **í™˜ê²½ ì„¤ì • ë¡œë“œ**: API í‚¤, ë² ì´ìŠ¤ URL ë“± í”Œë«í¼ë³„ ì„¤ì • ë¡œë“œ
  1. **HTTP í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”**: aiohttp ë˜ëŠ” httpx í´ë¼ì´ì–¸íŠ¸ ì„¸ì…˜ ìƒì„±
  1. **ì¬ì‹œë„ ì •ì±… ì„¤ì •**: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, Rate Limit ë“±ì— ëŒ€í•œ ì¬ì‹œë„ ë¡œì§ ì„¤ì •
  ## ë°ì´í„° ì²˜ë¦¬
  1. **ìš”ì²­ ê²€ì¦**: ì…ë ¥ íŒŒë¼ë¯¸í„° ìœ íš¨ì„± ê²€ì‚¬ (Pydantic ì‚¬ìš©)
  1. **í”Œë«í¼ë³„ URL êµ¬ì„±**: ê° í”Œë«í¼ì˜ API ë² ì´ìŠ¤ URLê³¼ ì—”ë“œí¬ì¸íŠ¸ ì¡°í•©
  1. **ì¸ì¦ í—¤ë” êµ¬ì„±**: í”Œë«í¼ë³„ ì¸ì¦ ë°©ì‹ì— ë”°ë¥¸ í—¤ë” ì„¤ì •
  1. **HTTP ìš”ì²­ ì‹¤í–‰**: ë¹„ë™ê¸° HTTP ìš”ì²­ ì „ì†¡
  1. **ì‘ë‹µ ì²˜ë¦¬**: ìƒíƒœ ì½”ë“œ í™•ì¸, JSON íŒŒì‹±, ì—ëŸ¬ ì²˜ë¦¬
  ## ê²°ê³¼ ë°˜í™˜
  1. **ì‘ë‹µ ì •ê·œí™”**: í”Œë«í¼ë³„ ì‘ë‹µì„ í†µì¼ëœ í˜•íƒœë¡œ ë³€í™˜
  1. **ìºì‹± ì²˜ë¦¬**: ë™ì¼í•œ ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ ìºì‹± (ì„ íƒì )
  1. **ë¡œê¹…**: ìš”ì²­/ì‘ë‹µ ì •ë³´ ê¸°ë¡
  ### í•µì‹¬ ë©”ì„œë“œ
  - `make_request()`: ë²”ìš© HTTP ìš”ì²­ ë©”ì„œë“œ
  - `get_github_diff()`: GitHub diff ì •ë³´ ì¡°íšŒ
  - `get_gitlab_diff()`: GitLab diff ì •ë³´ ì¡°íšŒ
  - `handle_rate_limit()`: Rate Limit ì²˜ë¦¬
  - `retry_request()`: ì¬ì‹œë„ ë¡œì§
  ---
  ### í´ë˜ìŠ¤ 2: PlatformAPIAdapter
  ### ì—­í• ê³¼ ì±…ì„
  - ê° í”Œë«í¼ë³„ API ìŠ¤í™ì˜ ì°¨ì´ë¥¼ ì¶”ìƒí™”
  - í”Œë«í¼ë³„ ì¸ì¦ ë°©ì‹, URL í˜•ì‹, ì‘ë‹µ í˜•íƒœë¥¼ í†µì¼ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µ
  - ìƒˆë¡œìš´ í”Œë«í¼ ì¶”ê°€ ì‹œ í™•ì¥ í¬ì¸íŠ¸ ì—­í• 
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | platform | str | Y | í”Œë«í¼ ìœ í˜• | "github" |
  | operation | str | Y | ìˆ˜í–‰í•  ì‘ì—… | "get_diff", "get_commit" |
  | repository | str | Y | ì €ì¥ì†Œ ì •ë³´ | "owner/repo" |
  | commit_sha | str | Y | ì»¤ë°‹ í•´ì‹œ | "abc123def456" |
  | auth_token | str | Y | ì¸ì¦ í† í° | "ghp_xxxxxxxxxxxx" |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | url | str | êµ¬ì„±ëœ API URL | "https://api.github.com/repos/..." |
  | headers | dict | ì¸ì¦ í—¤ë” | {"Authorization": "token xxx"} |
  | params | dict | ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ | {"per_page": 100} |
  | parser | callable | ì‘ë‹µ íŒŒì„œ í•¨ìˆ˜ | github_diff_parser |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  ## ì´ˆê¸°í™”
  1. **í”Œë«í¼ë³„ ì„¤ì • ë¡œë“œ**: ê° í”Œë«í¼ì˜ API ìŠ¤í™ ì •ë³´ ë¡œë“œ
  1. **ì–´ëŒ‘í„° ë“±ë¡**: ì§€ì›í•˜ëŠ” í”Œë«í¼ë³„ ì–´ëŒ‘í„° ë§¤í•‘ ë“±ë¡
  ## ë°ì´í„° ì²˜ë¦¬
  1. **í”Œë«í¼ ì‹ë³„**: ì…ë ¥ëœ í”Œë«í¼ ìœ í˜•ì— ë”°ë¥¸ ì–´ëŒ‘í„° ì„ íƒ
  1. **URL êµ¬ì„±**: í”Œë«í¼ë³„ API URL íŒ¨í„´ì— ë”°ë¥¸ URL ìƒì„±
  1. **ì¸ì¦ ì²˜ë¦¬**: í”Œë«í¼ë³„ ì¸ì¦ ë°©ì‹ ì ìš©
  1. **íŒŒë¼ë¯¸í„° ë§¤í•‘**: í†µì¼ëœ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ í”Œë«í¼ë³„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
  ## ê²°ê³¼ ë°˜í™˜
  1. **ìš”ì²­ ì •ë³´ íŒ¨í‚¤ì§€**: URL, í—¤ë”, íŒŒë¼ë¯¸í„° ë“±ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ êµ¬ì„±
  1. **íŒŒì„œ í•¨ìˆ˜ ì œê³µ**: ì‘ë‹µ ë°ì´í„° íŒŒì‹±ì„ ìœ„í•œ í•¨ìˆ˜ ì œê³µ
  ### í•µì‹¬ ë©”ì„œë“œ
  - `get_adapter()`: í”Œë«í¼ë³„ ì–´ëŒ‘í„° ë°˜í™˜
  - `build_url()`: API URL êµ¬ì„±
  - `get_auth_headers()`: ì¸ì¦ í—¤ë” ìƒì„±
  - `parse_response()`: ì‘ë‹µ ë°ì´í„° íŒŒì‹±
  ---
  ## ğŸ”„ ë°ì´í„° íë¦„ë„
  ### ì „ì²´ ë°ì´í„° í”Œë¡œìš°
  ```plain text
  [Webhook Event] â†’ [HTTPAPIClient] â†’ [PlatformAPIAdapter] â†’ [External API] â†’ [Response Parser] â†’ [Normalized Data]

  ```
  ### ìƒì„¸ ë°ì´í„° íë¦„
  ### Step 1: ë°ì´í„° ì…ë ¥
  - **Source**: Webhook ì´ë²¤íŠ¸ ë˜ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆ
  - **Format**: JSON í˜•íƒœì˜ API ìš”ì²­ ì •ë³´
  - **Validation**: Pydantic ëª¨ë¸ì„ í†µí•œ ì…ë ¥ ê²€ì¦
  ### Step 2: 1ì°¨ ì²˜ë¦¬
  - **Processor**: PlatformAPIAdapter
  - **Input**: í†µì¼ëœ ìš”ì²­ í˜•ì‹
  - **Output**: í”Œë«í¼ë³„ HTTP ìš”ì²­ ì •ë³´
  - **Transform**: í”Œë«í¼ë³„ API ìŠ¤í™ì— ë§ëŠ” ë³€í™˜
  ### Step 3: 2ì°¨ ì²˜ë¦¬
  - **Processor**: HTTPAPIClient
  - **Input**: í”Œë«í¼ë³„ HTTP ìš”ì²­ ì •ë³´
  - **Output**: API ì‘ë‹µ ë°ì´í„°
  - **Transform**: HTTP ìš”ì²­ ì‹¤í–‰ ë° ì‘ë‹µ ì²˜ë¦¬
  ### Step 4: ìµœì¢… ì¶œë ¥
  - **Target**: ë‹¤ë¥¸ ëª¨ë“ˆ (DiffAnalyzer ë“±)
  - **Format**: ì •ê·œí™”ëœ JSON ì‘ë‹µ
  - **Post-processing**: ìºì‹±, ë¡œê¹…, ì—ëŸ¬ ì²˜ë¦¬
  ---
  ## ğŸ” API ì¸ì¦ ê´€ë¦¬
  ### í”Œë«í¼ë³„ ì¸ì¦ ë°©ì‹
  ### GitHub
  - **ë°©ì‹**: Personal Access Token (PAT)
  - **í—¤ë”**: `Authorization: token {token}`
  - **ìŠ¤ì½”í”„**: `repo`, `read:user`
  ### GitLab
  - **ë°©ì‹**: Private Token ë˜ëŠ” OAuth
  - **í—¤ë”**: `PRIVATE-TOKEN: {token}`
  - **ê¶Œí•œ**: `read_api`, `read_repository`
  ### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
  - **í† í° ì €ì¥**: í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” ë³´ì•ˆ vault ì‚¬ìš©
  - **í† í° ë¡œí…Œì´ì…˜**: ì£¼ê¸°ì  í† í° ê°±ì‹ 
  - **ê¶Œí•œ ìµœì†Œí™”**: í•„ìš”í•œ ìµœì†Œ ê¶Œí•œë§Œ ë¶€ì—¬
  - **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  API í˜¸ì¶œ ê¸°ë¡
  ---
  ## ğŸ“Š Rate Limit ì²˜ë¦¬ ì „ëµ
  ### í”Œë«í¼ë³„ ì œí•œì‚¬í•­
  ### GitHub
  - **ì¸ì¦ëœ ìš”ì²­**: 5,000 requests/hour
  - **ê²€ìƒ‰ API**: 30 requests/minute
  - **í—¤ë” ì •ë³´**: `X-RateLimit-Remaining`, `X-RateLimit-Reset`
  ### GitLab
  - **ì¼ë°˜ API**: 300 requests/minute
  - **ê²€ìƒ‰ API**: 120 requests/minute
  - **í—¤ë” ì •ë³´**: `RateLimit-Remaining`, `RateLimit-Reset`
  ### ì²˜ë¦¬ ì „ëµ
  1. **ì‚¬ì „ í™•ì¸**: ìš”ì²­ ì „ ë‚¨ì€ í•œë„ ì²´í¬
  1. **ì§€ìˆ˜ ë°±ì˜¤í”„**: Rate limit ë„ë‹¬ ì‹œ ëŒ€ê¸°
  1. **ìš°ì„ ìˆœìœ„ í**: ì¤‘ìš”í•œ ìš”ì²­ ìš°ì„  ì²˜ë¦¬
  1. **ë¶„ì‚° ì²˜ë¦¬**: ì—¬ëŸ¬ í† í° í™œìš©í•œ ë¶€í•˜ ë¶„ì‚°
  ```python
  async def handle_rate_limit(response_headers):
      remaining = int(response_headers.get('X-RateLimit-Remaining', 0))
      reset_time = int(response_headers.get('X-RateLimit-Reset', 0))

      if remaining < 10:  # ì„ê³„ê°’ ì„¤ì •
          wait_time = reset_time - time.time()
          await asyncio.sleep(max(wait_time, 0))

  ```
  ---
  ## ğŸ”„ ì‘ë‹µ ìºì‹± ì „ëµ
  ### ìºì‹± ëŒ€ìƒ
  - **ì •ì  ë°ì´í„°**: ì»¤ë°‹ ì •ë³´, diff ë°ì´í„°
  - **ë©”íƒ€ë°ì´í„°**: ì €ì¥ì†Œ ì •ë³´, ì‚¬ìš©ì ì •ë³´
  - **ê²€ìƒ‰ ê²°ê³¼**: íŒŒì¼ ê²€ìƒ‰, ë¸Œëœì¹˜ ëª©ë¡
  ### ìºì‹± ì •ì±…
  | ë°ì´í„° ìœ í˜• | TTL | ìºì‹œ í‚¤ | ì„¤ëª… |
  | --- | --- | --- | --- |
  | ì»¤ë°‹ ì •ë³´ | 24ì‹œê°„ | `commit:{platform}:{repo}:{sha}` | ë³€ê²½ë˜ì§€ ì•ŠëŠ” ë°ì´í„° |
  | diff ë°ì´í„° | 12ì‹œê°„ | `diff:{platform}:{repo}:{sha}` | ì½”ë“œ ë³€ê²½ì‚¬í•­ |
  | ì‚¬ìš©ì ì •ë³´ | 1ì‹œê°„ | `user:{platform}:{username}` | í”„ë¡œí•„ ì •ë³´ |
  | ì €ì¥ì†Œ ì •ë³´ | 30ë¶„ | `repo:{platform}:{owner}:{repo}` | ë©”íƒ€ë°ì´í„° |
  ### ìºì‹œ ë¬´íš¨í™”
  - **ì‹œê°„ ê¸°ë°˜**: TTL ë§Œë£Œ
  - **ì´ë²¤íŠ¸ ê¸°ë°˜**: ìƒˆë¡œìš´ ì»¤ë°‹ ê°ì§€
  - **ìˆ˜ë™ ë¬´íš¨í™”**: ê´€ë¦¬ì ëª…ë ¹
  ---
  ## âš™ï¸ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­
  ### í™˜ê²½ ì„¤ì •
  - **ê°œë°œí™˜ê²½**: Python 3.11+, asyncio ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬
  - **ì˜ì¡´ì„±**: aiohttp, httpx, pydantic, tenacity, python-dotenv, redis
  - **í™˜ê²½ë³€ìˆ˜**: GITHUB_TOKEN, GITLAB_TOKEN, REDIS_URL, API_BASE_URLS
  ### í•µì‹¬ ë¡œì§
  ### ì•Œê³ ë¦¬ì¦˜ 1: ì§€ìˆ˜ ë°±ì˜¤í”„ ì¬ì‹œë„
  ```python
  async def exponential_backoff_retry(func, max_retries=3, base_delay=1):
      for attempt in range(max_retries):
          try:
              return await func()
          except RateLimitError:
              delay = base_delay * (2 ** attempt)
              await asyncio.sleep(delay)
          except Exception as e:
              if attempt == max_retries - 1:
                  raise e

  ```
  ### ì•Œê³ ë¦¬ì¦˜ 2: ì‘ë‹µ ì •ê·œí™”
  ```python
  def normalize_api_response(platform, response_data):
      if platform == "github":
          return GitHubResponseNormalizer(response_data).normalize()
      elif platform == "gitlab":
          return GitLabResponseNormalizer(response_data).normalize()
      else:
          return GenericResponseNormalizer(response_data).normalize()

  ```
  ### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
  - **ë³‘ëª© ì§€ì **: API Rate Limit, ë„¤íŠ¸ì›Œí¬ ì§€ì—°, ëŒ€ìš©ëŸ‰ diff ë°ì´í„°
  - **ìµœì í™” ë°©ì•ˆ**: ì—°ê²° í’€ë§, ì‘ë‹µ ìºì‹±, ë³‘ë ¬ ìš”ì²­ ì²˜ë¦¬, ì••ì¶• í™œìš©
  - **í™•ì¥ì„±**: í”ŒëŸ¬ê·¸ì¸ ê¸°ë°˜ í”Œë«í¼ ì–´ëŒ‘í„°, ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜
  ---
  ## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš
  ### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
  HTTPAPIClient í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  PlatformAPIAdapter í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  ì¸ì¦ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
  Rate Limit ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
  ### í†µí•© í…ŒìŠ¤íŠ¸
  GitHub API ì—°ë™ í…ŒìŠ¤íŠ¸
  GitLab API ì—°ë™ í…ŒìŠ¤íŠ¸
  ìºì‹± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
  ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
  ### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  Rate Limit ì²˜ë¦¬ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  ëŒ€ìš©ëŸ‰ diff ë°ì´í„° ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
  ë™ì‹œ ìš”ì²­ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
  ìºì‹œ íš¨ìœ¨ì„± í…ŒìŠ¤íŠ¸
  ---
  ## ğŸ“Š í™•ì¥ ê°€ëŠ¥ì„±
  ### ì§€ì› ì˜ˆì • í”Œë«í¼
  - **Bitbucket**: API ì–´ëŒ‘í„° ì¶”ê°€
  - **Azure DevOps**: ê¸°ì—…ìš© Git í”Œë«í¼ ì§€ì›
  - **Self-hosted Git**: ì»¤ìŠ¤í…€ Git ì„œë²„ ì§€ì›
  ### í–¥í›„ ê¸°ëŠ¥
  - **GraphQL ì§€ì›**: GitHub GraphQL API í™œìš©
  - **Webhook ê²€ì¦**: ë³´ì•ˆ ê°•í™”ë¥¼ ìœ„í•œ ì„œëª… ê²€ì¦
  - **ë©”íŠ¸ë¦­ ìˆ˜ì§‘**: API ì‚¬ìš©ëŸ‰, ì„±ëŠ¥ ì§€í‘œ ì¶”ì 
  - **Circuit Breaker**: ì¥ì•  ì „íŒŒ ë°©ì§€ íŒ¨í„´ ì ìš©
  ---
  ## ğŸ” ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…
  ### í•µì‹¬ ë©”íŠ¸ë¦­
  - API ì‘ë‹µ ì‹œê°„ (í‰ê· , P95, P99)
  - ì„±ê³µ/ì‹¤íŒ¨ìœ¨
  - Rate Limit ì‚¬ìš©ëŸ‰
  - ìºì‹œ íˆíŠ¸ìœ¨
  - ì—ëŸ¬ ë°œìƒ ë¹ˆë„
  ### ë¡œê·¸ ë ˆë²¨
  - **INFO**: ì •ìƒì ì¸ API í˜¸ì¶œ, ìºì‹œ íˆíŠ¸/ë¯¸ìŠ¤
  - **WARNING**: Rate Limit ê·¼ì ‘, ì¬ì‹œë„ ë°œìƒ, ëŠë¦° ì‘ë‹µ
  - **ERROR**: API í˜¸ì¶œ ì‹¤íŒ¨, ì¸ì¦ ì˜¤ë¥˜, ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬
  - **DEBUG**: ìƒì„¸í•œ ìš”ì²­/ì‘ë‹µ ì •ë³´, í—¤ë” ì •ë³´
  ---
  ## ğŸ“ ì„¤ì • íŒŒì¼ ì˜ˆì‹œ
  ```yaml
  # config/http_api_client.yaml
  platforms:
    github:
      base_url: "https://api.github.com"
      auth_header: "Authorization"
      auth_prefix: "token"
      rate_limit:
        requests_per_hour: 5000
        search_requests_per_minute: 30

    gitlab:
      base_url: "https://gitlab.com/api/v4"
      auth_header: "PRIVATE-TOKEN"
      rate_limit:
        requests_per_minute: 300

  retry_policy:
    max_retries: 3
    base_delay: 1
    max_delay: 60
    backoff_factor: 2

  cache:
    enabled: true
    backend: "redis"
    default_ttl: 300  # 5ë¶„
    max_size: 10000

  connection_pool:
    max_connections: 100
    max_keepalive_connections: 20
    keepalive_expiry: 5

  ```
  ì´ ì„¤ê³„ì„œëŠ” HTTPAPIClient ëª¨ë“ˆì´ CodePing.AI í”„ë¡œì íŠ¸ì—ì„œ ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ì¸ ì™¸ë¶€ API í†µì‹ ì„ ë‹´ë‹¹í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

### 3. DataStorage ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ(ì„¤ê³„ì„œìˆ˜ì •í•„ìš”í•¨)
- **ëª¨ë“ˆ ë§ˆìŠ¤í„°**: 1ê°œ ì—°ê²°
- **ì§„í–‰ë¥ **: None
- **ìƒíƒœ**: MVP ì™„ë£Œ
- **ì˜ˆìƒì‘ì—…ì‹œê°„**: None
- **ê°œë°œLLM**: claude-4-sonnet
- **ìƒì„±ì¼**: 2025-06-26
- **ê°œë°œì**: YunJeong Kim(ê´€ë¦¬ì)
- **ì „ì²´ í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„° DB**: 1ê°œ ì—°ê²°
- **í”„ë¡¬í”„íŠ¸**: 1ê°œ ì—°ê²°
- **ì´ë¦„**: DataStorage ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ(ì„¤ê³„ì„œìˆ˜ì •í•„ìš”í•¨)
- **ë§í¬**: [DataStorage ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ(ì„¤ê³„ì„œìˆ˜ì •í•„ìš”í•¨)](https://www.notion.so/DataStorage-21e18a4c52a181f1b742f30c4b67dfe5)

**ğŸ“„ í˜ì´ì§€ ë‚´ìš©:**
  # ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
  ---
  ### ì „ì²´ êµ¬ì¡°ë„
  ```plain text
  [WebhookReceiver] â†’ [GitDataParser] â†’ [DataStorage] â†’ [PostgreSQL DB]
                                             â†“
                                     [Event Sourcing Store]
                                             â†“
                                     [ActivityAnalyzer]

  ```
  ### ê¸°ìˆ  ìŠ¤íƒ
  - **ë°±ì—”ë“œ**: Python 3.11+, FastAPI, SQLAlchemy
  - **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL 17 (ë²¡í„° ê²€ìƒ‰ ì§€ì›, í–¥ìƒëœ JSONB ì¸ë±ì‹±)
  - **ìºì‹±**: Redis 7.4 (ë©€í‹°ìŠ¤ë ˆë“œ ì²˜ë¦¬, í–¥ìƒëœ ë©”ëª¨ë¦¬ ê´€ë¦¬)
  - **ë©”ì‹œì§€ í**: Apache Kafka (ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°)
  - **ì»¨í…Œì´ë„ˆ**: Docker, Docker Compose
  - **ëª¨ë‹ˆí„°ë§**: Prometheus, Grafana
  - **AI/ML**: OpenAI GPT-4 API
  ---
  ## ğŸ“¦ í´ë˜ìŠ¤ ì„¤ê³„
  ### í´ë˜ìŠ¤ 1: DataStorageManager
  ### ì—­í• ê³¼ ì±…ì„
  - êµ¬ì¡°í™”ëœ ì»¤ë°‹ ë°ì´í„°ì˜ ì˜êµ¬ ì €ì¥ ê´€ë¦¬
  - ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ ë° ë¬´ê²°ì„± ë³´ì¥
  - ì´ë²¤íŠ¸ ì†Œì‹± íŒ¨í„´ êµ¬í˜„ì„ í†µí•œ ë³€ê²½ ì´ë ¥ ì¶”ì 
  - ë°ì´í„° ê²€ì¦ ë° ë³€í™˜ ì²˜ë¦¬
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì œì•½ì¡°ê±´ | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | commit_data | CommitData | êµ¬ì¡°í™”ëœ ì»¤ë°‹ ì •ë³´ | í•„ìˆ˜, ê²€ì¦ë¨ | ì»¤ë°‹ í•´ì‹œ, ë©”ì‹œì§€, ì‘ì„±ì ë“± |
  | diff_data | DiffData | ì½”ë“œ ë³€ê²½ì‚¬í•­ ì •ë³´ | í•„ìˆ˜ | íŒŒì¼ë³„ ì¶”ê°€/ì‚­ì œ/ìˆ˜ì • ë¼ì¸ |
  | metadata | Dict | ì¶”ê°€ ë©”íƒ€ë°ì´í„° | ì„ íƒì  | íƒ€ì„ìŠ¤íƒ¬í”„, ë¸Œëœì¹˜ ì •ë³´ |
  | user_id | str | ê°œë°œì ì‹ë³„ì | í•„ìˆ˜ | GitHub username |
  | repository_id | str | ì €ì¥ì†Œ ì‹ë³„ì | í•„ìˆ˜ | repo owner/name |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ë°˜í™˜ì¡°ê±´ |
  | --- | --- | --- | --- |
  | storage_id | UUID | ì €ì¥ëœ ë°ì´í„° ê³ ìœ  ID | ì„±ê³µ ì‹œ |
  | status | StorageStatus | ì €ì¥ ìƒíƒœ | í•­ìƒ |
  | timestamp | datetime | ì €ì¥ ì™„ë£Œ ì‹œê°„ | ì„±ê³µ ì‹œ |
  | error_details | Optional[str] | ì˜¤ë¥˜ ìƒì„¸ ì •ë³´ | ì‹¤íŒ¨ ì‹œ |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  **ì´ˆê¸°í™”**
  - PostgreSQL ì—°ê²° í’€ ì„¤ì • ë° ê²€ì¦
  - Redis ìºì‹œ ì—°ê²° í™•ì¸
  - í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ê²€ì¦
  - ì´ë²¤íŠ¸ ì†Œì‹± ìŠ¤í† ì–´ ì´ˆê¸°í™”
  **ë°ì´í„° ì²˜ë¦¬**
  - ì…ë ¥ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ê²€ì¦ (Pydantic)
  - ì¤‘ë³µ ì»¤ë°‹ ë°ì´í„° í™•ì¸ (í•´ì‹œ ê¸°ë°˜)
  - íŠ¸ëœì­ì…˜ ì‹œì‘
  - ë©”ì¸ ì»¤ë°‹ ë°ì´í„° ì €ì¥
  - ê´€ë ¨ diff ë°ì´í„° ì €ì¥
  - ì´ë²¤íŠ¸ ìƒì„± ë° ë°œí–‰
  - íŠ¸ëœì­ì…˜ ì»¤ë°‹
  **ê²°ê³¼ ë°˜í™˜**
  - ì €ì¥ ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ ë°˜í™˜
  - ìƒì„±ëœ ì €ì¥ì†Œ ID ì œê³µ
  - ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡¤ë°± ë° ìƒì„¸ ë¡œê¹…
  ### í•µì‹¬ ë©”ì„œë“œ
  - `store_commit_data(commit_data: CommitData)`: ì»¤ë°‹ ë°ì´í„° ì €ì¥
  - `store_diff_data(diff_data: DiffData, commit_id: UUID)`: diff ë°ì´í„° ì €ì¥
  - `validate_data_integrity(data: Any)`: ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦
  - `create_storage_event(data: Dict)`: ì €ì¥ ì´ë²¤íŠ¸ ìƒì„±
  - `check_duplicate_commit(commit_hash: str)`: ì¤‘ë³µ ì»¤ë°‹ í™•ì¸
  ---
  ### í´ë˜ìŠ¤ 2: EventSourcingStore
  ### ì—­í• ê³¼ ì±…ì„
  - ë°ì´í„° ë³€ê²½ ì´ë²¤íŠ¸ì˜ ìˆœì°¨ì  ì €ì¥
  - ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ ê´€ë¦¬ ë° ì¬ìƒ ê¸°ëŠ¥
  - ë°ì´í„° ìƒíƒœ ì¬êµ¬ì„± ì§€ì›
  - ê°ì‚¬ ë¡œê·¸ ë° ì¶”ì ì„± ì œê³µ
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì œì•½ì¡°ê±´ | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | event_type | EventType | ì´ë²¤íŠ¸ ìœ í˜• | í•„ìˆ˜ | COMMIT_STORED, DIFF_ADDED |
  | aggregate_id | UUID | ì§‘ê³„ ì‹ë³„ì | í•„ìˆ˜ | ì»¤ë°‹ ID |
  | event_data | Dict | ì´ë²¤íŠ¸ ë°ì´í„° | í•„ìˆ˜ | ë³€ê²½ëœ ë°ì´í„° |
  | version | int | ì´ë²¤íŠ¸ ë²„ì „ | ìë™ ì¦ê°€ | 1, 2, 3... |
  | correlation_id | UUID | ì—°ê´€ ì´ë²¤íŠ¸ ID | ì„ íƒì  | ê´€ë ¨ ì´ë²¤íŠ¸ ì¶”ì ìš© |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ë°˜í™˜ì¡°ê±´ |
  | --- | --- | --- | --- |
  | event_id | UUID | ì´ë²¤íŠ¸ ê³ ìœ  ID | ì„±ê³µ ì‹œ |
  | sequence_number | int | ì‹œí€€ìŠ¤ ë²ˆí˜¸ | ì„±ê³µ ì‹œ |
  | stored_at | datetime | ì €ì¥ ì‹œê°„ | ì„±ê³µ ì‹œ |
  | stream_position | int | ìŠ¤íŠ¸ë¦¼ ë‚´ ìœ„ì¹˜ | ì„±ê³µ ì‹œ |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  **ì´ˆê¸°í™”**
  - ì´ë²¤íŠ¸ ìŠ¤í† ì–´ í…Œì´ë¸” ì´ˆê¸°í™”
  - ì‹œí€€ìŠ¤ ë²ˆí˜¸ ê´€ë¦¬ ì„¤ì •
  - ìŠ¤íŠ¸ë¦¼ íŒŒí‹°ì…”ë‹ êµ¬ì„±
  **ë°ì´í„° ì²˜ë¦¬**
  - ì´ë²¤íŠ¸ ì§ë ¬í™” (JSON)
  - ìŠ¤í‚¤ë§ˆ ë²„ì „ ê´€ë¦¬
  - ì´ë²¤íŠ¸ ìˆœì„œ ë³´ì¥
  - ì›ìì  ì €ì¥ ì²˜ë¦¬
  - ìŠ¤íŠ¸ë¦¼ ì¸ë±ì‹±
  **ê²°ê³¼ ë°˜í™˜**
  - ì´ë²¤íŠ¸ ì €ì¥ í™•ì¸
  - ìŠ¤íŠ¸ë¦¼ ìœ„ì¹˜ ì •ë³´ ë°˜í™˜
  - êµ¬ë…ìì—ê²Œ ì´ë²¤íŠ¸ ë°œí–‰
  ### í•µì‹¬ ë©”ì„œë“œ
  - `append_event(event: Event)`: ì´ë²¤íŠ¸ ì¶”ê°€
  - `get_events_by_aggregate(aggregate_id: UUID)`: ì§‘ê³„ë³„ ì´ë²¤íŠ¸ ì¡°íšŒ
  - `replay_events(from_sequence: int)`: ì´ë²¤íŠ¸ ì¬ìƒ
  - `subscribe_to_stream(handler: Callable)`: ìŠ¤íŠ¸ë¦¼ êµ¬ë…
  - `get_current_version(aggregate_id: UUID)`: í˜„ì¬ ë²„ì „ ì¡°íšŒ
  ---
  ### í´ë˜ìŠ¤ 3: DatabaseRepository
  ### ì—­í• ê³¼ ì±…ì„
  - ë°ì´í„°ë² ì´ìŠ¤ CRUD ì—°ì‚° ì¶”ìƒí™”
  - ì¿¼ë¦¬ ìµœì í™” ë° ì„±ëŠ¥ ê´€ë¦¬
  - ì—°ê²° í’€ ê´€ë¦¬
  - ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ í†µí•©
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì œì•½ì¡°ê±´ | ì˜ˆì‹œ |
  | --- | --- | --- | --- | --- |
  | entity | BaseModel | ì €ì¥í•  ì—”í‹°í‹° | í•„ìˆ˜ | Commit, DiffEntry |
  | query_params | QueryParams | ì¡°íšŒ ë§¤ê°œë³€ìˆ˜ | ì„ íƒì  | í•„í„°, ì •ë ¬, í˜ì´ì§• |
  | transaction_ctx | TransactionContext | íŠ¸ëœì­ì…˜ ì»¨í…ìŠ¤íŠ¸ | ì„ íƒì  | í™œì„± íŠ¸ëœì­ì…˜ |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ë°˜í™˜ì¡°ê±´ |
  | --- | --- | --- | --- |
  | result | List[BaseModel] | ì¡°íšŒ ê²°ê³¼ | ì¡°íšŒ ì‹œ |
  | affected_rows | int | ì˜í–¥ë°›ì€ í–‰ ìˆ˜ | ìˆ˜ì •/ì‚­ì œ ì‹œ |
  | execution_time | float | ì‹¤í–‰ ì‹œê°„ (ms) | í•­ìƒ |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  **ì´ˆê¸°í™”**
  - SQLAlchemy ì—”ì§„ ì„¤ì •
  - ì—°ê²° í’€ êµ¬ì„± (ìµœì†Œ 5, ìµœëŒ€ 20)
  - ì„¸ì…˜ íŒ©í† ë¦¬ ìƒì„±
  **ë°ì´í„° ì²˜ë¦¬**
  - ì„¸ì…˜ ìƒì„± ë° ê´€ë¦¬
  - ì¿¼ë¦¬ ì‹¤í–‰ ë° ìµœì í™”
  - íŠ¸ëœì­ì…˜ ê´€ë¦¬
  - ì˜ˆì™¸ ì²˜ë¦¬ ë° ë¡¤ë°±
  **ê²°ê³¼ ë°˜í™˜**
  - ê²°ê³¼ ê°ì²´ ë§¤í•‘
  - ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  - ë¦¬ì†ŒìŠ¤ ì •ë¦¬
  ### í•µì‹¬ ë©”ì„œë“œ
  - `save(entity: BaseModel)`: ì—”í‹°í‹° ì €ì¥
  - `find_by_id(entity_id: UUID)`: IDë¡œ ì¡°íšŒ
  - `find_by_criteria(criteria: Dict)`: ì¡°ê±´ë¶€ ì¡°íšŒ
  - `update(entity: BaseModel)`: ì—”í‹°í‹° ìˆ˜ì •
  - `delete(entity_id: UUID)`: ì—”í‹°í‹° ì‚­ì œ
  ---
  ## ğŸ”„ ë°ì´í„° íë¦„ë„
  ### ì „ì²´ ë°ì´í„° í”Œë¡œìš°
  ```plain text
  [GitDataParser] â†’ [DataStorageManager] â†’ [PostgreSQL] â†’ [EventSourcingStore] â†’ [Kafka] â†’ [ActivityAnalyzer]

  ```
  ### ìƒì„¸ ë°ì´í„° íë¦„
  ### Step 1: ë°ì´í„° ì…ë ¥
  - **Source**: GitDataParserì—ì„œ êµ¬ì¡°í™”ëœ ì»¤ë°‹ ë°ì´í„°
  - **Format**: CommitData + DiffData (Pydantic ëª¨ë¸)
  - **Validation**: ìŠ¤í‚¤ë§ˆ ê²€ì¦, í•„ìˆ˜ í•„ë“œ í™•ì¸, ë°ì´í„° íƒ€ì… ê²€ì¦
  ### Step 2: 1ì°¨ ì²˜ë¦¬
  - **Processor**: DataStorageManager
  - **Input**: ê²€ì¦ëœ ì»¤ë°‹ ë° diff ë°ì´í„°
  - **Output**: ì €ì¥ëœ ë°ì´í„° ID ë° ìƒíƒœ
  - **Transform**:
  ### Step 3: 2ì°¨ ì²˜ë¦¬
  - **Processor**: EventSourcingStore
  - **Input**: ë°ì´í„° ë³€ê²½ ì´ë²¤íŠ¸
  - **Output**: ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ ìœ„ì¹˜
  - **Transform**:
  ### Step 4: ìµœì¢… ì¶œë ¥
  - **Target**:
  - **Format**: ì •ê·œí™”ëœ ê´€ê³„í˜• ë°ì´í„° + ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼
  - **Post-processing**:
  ---
  ## âš™ï¸ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­
  ### í™˜ê²½ ì„¤ì •
  - **ê°œë°œí™˜ê²½**: Python 3.11+, Poetry ì˜ì¡´ì„± ê´€ë¦¬
  - **ì˜ì¡´ì„±**:
  - **í™˜ê²½ë³€ìˆ˜**:
  ### í•µì‹¬ ë¡œì§
  ### ì•Œê³ ë¦¬ì¦˜ 1: ë°ì´í„° ì €ì¥ íŠ¸ëœì­ì…˜
  ```python
  async def store_commit_with_transaction(self, commit_data: CommitData, diff_data: DiffData) -> StorageResult:
      async with self.db.transaction() as txn:
          try:
              # 1. ì¤‘ë³µ í™•ì¸
              if await self.check_duplicate_commit(commit_data.hash):
                  return StorageResult(status=DUPLICATE, message="Commit already exists")

              # 2. ì»¤ë°‹ ë°ì´í„° ì €ì¥
              commit_id = await self.save_commit(commit_data, txn)

              # 3. Diff ë°ì´í„° ì €ì¥
              diff_entries = await self.save_diff_data(diff_data, commit_id, txn)

              # 4. ì´ë²¤íŠ¸ ìƒì„±
              event = self.create_storage_event(commit_id, commit_data, diff_entries)
              await self.event_store.append_event(event)

              # 5. ìºì‹œ ì—…ë°ì´íŠ¸
              await self.update_cache(commit_id, commit_data)

              await txn.commit()
              return StorageResult(status=SUCCESS, storage_id=commit_id)

          except Exception as e:
              await txn.rollback()
              logger.error(f"Storage transaction failed: {e}")
              return StorageResult(status=ERROR, error=str(e))

  ```
  ### ì•Œê³ ë¦¬ì¦˜ 2: ì´ë²¤íŠ¸ ì†Œì‹± ìŠ¤íŠ¸ë¦¼ ê´€ë¦¬
  ```python
  async def append_event_with_ordering(self, event: Event) -> EventResult:
      # 1. ì´ë²¤íŠ¸ ê²€ì¦
      self.validate_event_schema(event)

      # 2. ì‹œí€€ìŠ¤ ë²ˆí˜¸ ìƒì„± (Redis ì›ìì  ì¦ê°€)
      sequence_number = await self.redis.incr(f"seq:{event.aggregate_id}")

      # 3. ì´ë²¤íŠ¸ ì§ë ¬í™”
      serialized_event = {
          "event_id": str(uuid4()),
          "aggregate_id": str(event.aggregate_id),
          "event_type": event.type.value,
          "data": event.data,
          "version": sequence_number,
          "timestamp": datetime.utcnow().isoformat(),
          "metadata": event.metadata
      }

      # 4. ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
      event_id = await self.db.save_event(serialized_event)

      # 5. Kafka ë°œí–‰
      await self.kafka_producer.send(
          topic=f"events.{event.aggregate_type}",
          value=serialized_event,
          key=str(event.aggregate_id)
      )

      return EventResult(event_id=event_id, sequence_number=sequence_number)

  ```
  ### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
  - **ë³‘ëª© ì§€ì **:
  - **ìµœì í™” ë°©ì•ˆ**:
  - **í™•ì¥ì„±**:
  ---
  ## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš
  ### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
  DataStorageManager í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  EventSourcingStore í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  DatabaseRepository í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
  ### í†µí•© í…ŒìŠ¤íŠ¸
  ì „ì²´ ë°ì´í„° í”Œë¡œìš° í…ŒìŠ¤íŠ¸
  ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ í…ŒìŠ¤íŠ¸ (PostgreSQL, Redis, Kafka)
  ì¥ì•  ë³µêµ¬ í…ŒìŠ¤íŠ¸
  ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
  ### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  ë™ì‹œ ì‚¬ìš©ì 1000ëª… ê¸°ì¤€ ì²˜ë¦¬ëŸ‰ í…ŒìŠ¤íŠ¸
  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
  ì‘ë‹µ ì‹œê°„ SLA ê²€ì¦ (< 100ms)
  ---
  ## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼
  ### ì£¼ìš” ë©”íŠ¸ë¦­
  - **ì„±ëŠ¥ ë©”íŠ¸ë¦­**:
  - **ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­**:
  - **ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­**:
  ### ì•Œë¦¼ ì„¤ì •
  - **Critical**: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨, íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ìœ¨ > 5%
  - **Warning**: ì‘ë‹µ ì‹œê°„ > 200ms, ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  > 80%
  - **Info**: ì¼ì¼ ì²˜ë¦¬ëŸ‰ ë¦¬í¬íŠ¸, ì„±ëŠ¥ ê°œì„  ì œì•ˆ
  ---
  ## ğŸ” ë³´ì•ˆ ë° ê·œì • ì¤€ìˆ˜
  ### ë°ì´í„° ë³´ì•ˆ
  - **ì•”í˜¸í™”**:
  - **ì ‘ê·¼ ì œì–´**:
  ### ê°ì‚¬ ë° ê·œì • ì¤€ìˆ˜
  - **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ë°ì´í„° ë³€ê²½ ì´ë²¤íŠ¸ ê¸°ë¡
  - **ë°ì´í„° ë³´ì¡´**: 7ë…„ê°„ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ ë³´ê´€
  - **ê°œì¸ì •ë³´ ë³´í˜¸**: ê°œë°œì ì‹ë³„ ì •ë³´ í•´ì‹± ì²˜ë¦¬
  ### ì¬í•´ ë³µêµ¬
  - **ë°±ì—… ì „ëµ**:
  - **ë³µêµ¬ ëª©í‘œ**:
  ---
  ## ğŸš€ ë°°í¬ ë° ìš´ì˜
  ### ë°°í¬ ì „ëµ
  - **Blue-Green ë°°í¬**: ë¬´ì¤‘ë‹¨ ì„œë¹„ìŠ¤ ì œê³µ
  - **ì¹´ë‚˜ë¦¬ ë°°í¬**: ì ì§„ì  íŠ¸ë˜í”½ ì „í™˜ (10% â†’ 50% â†’ 100%)
  - **ë¡¤ë°± ì „ëµ**: 1ë¶„ ë‚´ ì´ì „ ë²„ì „ ë³µêµ¬
  ### ìš´ì˜ ìë™í™”
  - **í—¬ìŠ¤ ì²´í¬**: `/health` ì—”ë“œí¬ì¸íŠ¸ (ì‘ë‹µ ì‹œê°„, ì˜ì¡´ì„± ìƒíƒœ)
  - **Auto Scaling**: CPU 80% ì´ˆê³¼ ì‹œ ì¸ìŠ¤í„´ìŠ¤ ì¦ê°€
  - **ì¥ì•  ê²©ë¦¬**: Circuit Breaker íŒ¨í„´ ì ìš©
  ### ìœ ì§€ë³´ìˆ˜
  - **ì •ê¸° ì‘ì—…**:
  - **ì—…ë°ì´íŠ¸ ì ˆì°¨**:
  ---
  ## ğŸš€ MVP (Minimum Viable Product) ë²„ì „ ì„¤ê³„
  ### MVP ë²”ìœ„ ì •ì˜
  **í¬í•¨ ê¸°ëŠ¥**
  - âœ… ê¸°ë³¸ ì»¤ë°‹ ë°ì´í„° ì €ì¥ (PostgreSQL)
  - âœ… ê°„ë‹¨í•œ diff ë°ì´í„° ì €ì¥
  - âœ… ì¤‘ë³µ ì»¤ë°‹ í™•ì¸
  - âœ… ê¸°ë³¸ íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - âœ… ì €ì¥ ì„±ê³µ/ì‹¤íŒ¨ ì‘ë‹µ
  **ì œì™¸ ê¸°ëŠ¥ (í–¥í›„ ë‹¨ê³„)**
  - âŒ ì´ë²¤íŠ¸ ì†Œì‹± (ë‹¨ìˆœ CRUDë¡œ ì‹œì‘)
  - âŒ Redis ìºì‹± (ë°ì´í„°ë² ì´ìŠ¤ë§Œ ì‚¬ìš©)
  - âŒ Kafka ë©”ì‹œì§• (ì§ì ‘ í˜¸ì¶œ)
  - âŒ ë³µì¡í•œ ëª¨ë‹ˆí„°ë§ (ê¸°ë³¸ ë¡œê¹…ë§Œ)
  - âŒ ìƒ¤ë”©/ë¶„ì‚° ì²˜ë¦¬
  ### MVP ì•„í‚¤í…ì²˜
  ```plain text
  [GitDataParser] â†’ [DataStorageManager] â†’ [PostgreSQL]
                         â†“
                   [Simple Response]

  ```
  ### MVP í´ë˜ìŠ¤ ì„¤ê³„
  ### SimplifiedDataStorage
  ```python
  from sqlalchemy.orm import Session
  from pydantic import BaseModel
  from typing import Optional
  import logging

  class CommitData(BaseModel):
      commit_hash: str
      message: str
      author: str
      timestamp: datetime
      repository: str
      branch: str

  class DiffData(BaseModel):
      file_path: str
      additions: int
      deletions: int
      changes: str

  class StorageResult(BaseModel):
      success: bool
      commit_id: Optional[int] = None
      message: str

  class SimplifiedDataStorage:
      def __init__(self, db_session: Session):
          self.db = db_session
          self.logger = logging.getLogger(__name__)

      def store_commit(self, commit_data: CommitData, diff_data: List[DiffData]) -> StorageResult:
          """MVP: ê°„ë‹¨í•œ ì»¤ë°‹ ë°ì´í„° ì €ì¥"""
          try:
              # 1. ì¤‘ë³µ í™•ì¸
              if self._is_duplicate_commit(commit_data.commit_hash):
                  return StorageResult(
                      success=False,
                      message="Commit already exists"
                  )

              # 2. ì»¤ë°‹ ì €ì¥
              commit_record = CommitRecord(
                  hash=commit_data.commit_hash,
                  message=commit_data.message,
                  author=commit_data.author,
                  timestamp=commit_data.timestamp,
                  repository=commit_data.repository,
                  branch=commit_data.branch
              )
              self.db.add(commit_record)
              self.db.flush()  # ID ìƒì„±

              # 3. diff ë°ì´í„° ì €ì¥
              for diff in diff_data:
                  diff_record = DiffRecord(
                      commit_id=commit_record.id,
                      file_path=diff.file_path,
                      additions=diff.additions,
                      deletions=diff.deletions,
                      changes=diff.changes
                  )
                  self.db.add(diff_record)

              # 4. ì»¤ë°‹
              self.db.commit()

              self.logger.info(f"Stored commit: {commit_data.commit_hash}")
              return StorageResult(
                  success=True,
                  commit_id=commit_record.id,
                  message="Commit stored successfully"
              )

          except Exception as e:
              self.db.rollback()
              self.logger.error(f"Failed to store commit: {e}")
              return StorageResult(
                  success=False,
                  message=f"Storage failed: {str(e)}"
              )

      def _is_duplicate_commit(self, commit_hash: str) -> bool:
          """ì¤‘ë³µ ì»¤ë°‹ í™•ì¸"""
          return self.db.query(CommitRecord).filter(
              CommitRecord.hash == commit_hash
          ).first() is not None

  ```
  ### MVP ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
  ```sql
  -- ì»¤ë°‹ í…Œì´ë¸”
  CREATE TABLE commits (
      id SERIAL PRIMARY KEY,
      hash VARCHAR(40) UNIQUE NOT NULL,
      message TEXT NOT NULL,
      author VARCHAR(255) NOT NULL,
      timestamp TIMESTAMP NOT NULL,
      repository VARCHAR(255) NOT NULL,
      branch VARCHAR(255) NOT NULL,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );

  -- diff í…Œì´ë¸”
  CREATE TABLE commit_diffs (
      id SERIAL PRIMARY KEY,
      commit_id INTEGER REFERENCES commits(id) ON DELETE CASCADE,
      file_path TEXT NOT NULL,
      additions INTEGER DEFAULT 0,
      deletions INTEGER DEFAULT 0,
      changes TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );

  -- ì¸ë±ìŠ¤
  CREATE INDEX idx_commits_hash ON commits(hash);
  CREATE INDEX idx_commits_timestamp ON commits(timestamp);
  CREATE INDEX idx_commits_author ON commits(author);
  CREATE INDEX idx_diffs_commit_id ON commit_diffs(commit_id);

  ```
  ### MVP ì˜ì¡´ì„± (requirements.txt)
  ```plain text
  # í•µì‹¬ ì˜ì¡´ì„±ë§Œ
  fastapi==0.104.1
  sqlalchemy==2.0.23
  psycopg2-binary==2.9.7
  pydantic==2.5.0
  python-dotenv==1.0.0
  uvicorn==0.24.0

  # ê°œë°œ/í…ŒìŠ¤íŠ¸
  pytest==7.4.3
  pytest-asyncio==0.21.1

  ```
  ### MVP í™˜ê²½ ì„¤ì •
  ```python
  # settings.py
  from pydantic_settings import BaseSettings

  class Settings(BaseSettings):
      database_url: str = "postgresql://user:pass@localhost:5432/codeping"
      log_level: str = "INFO"

      class Config:
          env_file = ".env"

  settings = Settings()

  ```
  ### MVP í…ŒìŠ¤íŠ¸ ì „ëµ
  ```python
  # test_mvp_storage.py
  import pytest
  from sqlalchemy import create_engine
  from sqlalchemy.orm import sessionmaker
  from datetime import datetime

  @pytest.fixture
  def db_session():
      engine = create_engine("sqlite:///:memory:")  # í…ŒìŠ¤íŠ¸ìš© ì¸ë©”ëª¨ë¦¬ DB
      Base.metadata.create_all(engine)
      Session = sessionmaker(bind=engine)
      session = Session()
      yield session
      session.close()

  def test_store_commit_success(db_session):
      storage = SimplifiedDataStorage(db_session)

      commit_data = CommitData(
          commit_hash="abc123",
          message="Add new feature",
          author="john@example.com",
          timestamp=datetime.now(),
          repository="owner/repo",
          branch="main"
      )

      diff_data = [
          DiffData(
              file_path="src/main.py",
              additions=10,
              deletions=2,
              changes="Added new function"
          )
      ]

      result = storage.store_commit(commit_data, diff_data)

      assert result.success is True
      assert result.commit_id is not None
      assert "successfully" in result.message

  def test_duplicate_commit_prevention(db_session):
      storage = SimplifiedDataStorage(db_session)

      # ì²« ë²ˆì§¸ ì €ì¥
      commit_data = CommitData(
          commit_hash="duplicate123",
          message="Test commit",
          author="test@example.com",
          timestamp=datetime.now(),
          repository="test/repo",
          branch="main"
      )

      result1 = storage.store_commit(commit_data, [])
      assert result1.success is True

      # ì¤‘ë³µ ì €ì¥ ì‹œë„
      result2 = storage.store_commit(commit_data, [])
      assert result2.success is False
      assert "already exists" in result2.message

  ```
  ### MVP ë°°í¬ ì„¤ì •
  ```plain text
  # Dockerfile (MVP)
  FROM python:3.11-slim

  WORKDIR /app

  # ìµœì†Œ ì˜ì¡´ì„±ë§Œ ì„¤ì¹˜
  COPY requirements.txt .
  RUN pip install --no-cache-dir -r requirements.txt

  COPY . .

  EXPOSE 8000

  CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]

  ```
  ```yaml
  # docker-compose.yml (MVP)
  version: '3.8'

  services:
    app:
      build: .
      ports:
        - "8000:8000"
      environment:
        - DATABASE_URL=postgresql://postgres:password@db:5432/codeping
      depends_on:
        - db

    db:
      image: postgres:15
      environment:
        - POSTGRES_DB=codeping
        - POSTGRES_USER=postgres
        - POSTGRES_PASSWORD=password
      ports:
        - "5432:5432"
      volumes:
        - postgres_data:/var/lib/postgresql/data

  volumes:
    postgres_data:

  ```
  ### MVP ê°œë°œ ì¼ì •
  | ë‹¨ê³„ | ì‘ì—… ë‚´ìš© | ì˜ˆìƒ ì‹œê°„ | ë‹´ë‹¹ì |
  | --- | --- | --- | --- |
  | 1ë‹¨ê³„ | ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ë° ìƒì„± | 2ì‹œê°„ | Backend Dev |
  | 2ë‹¨ê³„ | ê¸°ë³¸ ëª¨ë¸ ë° ì €ì¥ ë¡œì§ êµ¬í˜„ | 4ì‹œê°„ | Backend Dev |
  | 3ë‹¨ê³„ | API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ | 2ì‹œê°„ | Backend Dev |
  | 4ë‹¨ê³„ | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± | 3ì‹œê°„ | Backend Dev |
  | 5ë‹¨ê³„ | í†µí•© í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹… | 3ì‹œê°„ | Backend Dev |
  | 6ë‹¨ê³„ | Docker ì„¤ì • ë° ë°°í¬ | 2ì‹œê°„ | DevOps |
  **ì´ ì˜ˆìƒ ì‹œê°„: 16ì‹œê°„ (2ì¼)**
  ### MVPì—ì„œ ì „ì²´ ë²„ì „ìœ¼ë¡œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš
  ### Phase 1: MVP â†’ ê¸°ë³¸ í™•ì¥ (1ì£¼)
  - Redis ìºì‹± ì¶”ê°€
  - ê¸°ë³¸ ëª¨ë‹ˆí„°ë§ (Prometheus metrics)
  - ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
  ### Phase 2: ì¤‘ê¸‰ í™•ì¥ (2ì£¼)
  - ì´ë²¤íŠ¸ ì†Œì‹± ë„ì…
  - Kafka ë©”ì‹œì§• ì¶”ê°€
  - ì„±ëŠ¥ ìµœì í™”
  ### Phase 3: ê³ ê¸‰ í™•ì¥ (3ì£¼)
  - ë¶„ì‚° ì²˜ë¦¬
  - ê³ ê¸‰ ëª¨ë‹ˆí„°ë§
  - ë³´ì•ˆ ê°•í™”
  ### MVP ì„±ê³µ ì§€í‘œ
  **ê¸°ìˆ ì  ì§€í‘œ**
  - âœ… ì»¤ë°‹ ì €ì¥ ì„±ê³µë¥  > 99%
  - âœ… ì‘ë‹µ ì‹œê°„ < 500ms
  - âœ… ì¤‘ë³µ ì»¤ë°‹ ì •í™•í•œ íƒì§€
  **ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ**
  - âœ… ì¼ì¼ 100+ ì»¤ë°‹ ì²˜ë¦¬ ê°€ëŠ¥
  - âœ… ì‹œìŠ¤í…œ ë‹¤ìš´íƒ€ì„ < 1%
  - âœ… ê°œë°œíŒ€ ë§Œì¡±ë„ í™•ì¸
  ---
  *ì´ ì„¤ê³„ì„œëŠ” 2025ë…„ ìµœì‹  ë°ì´í„° ì €ì¥ ê¸°ìˆ  íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•˜ì—¬ ì‘ì„±ë˜ì—ˆìœ¼ë©°, ì´ë²¤íŠ¸ ì†Œì‹±, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜, PostgreSQL 17ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì„ í™œìš©í•©ë‹ˆë‹¤. MVP ë²„ì „ì„ í†µí•´ ë¹ ë¥¸ ê²€ì¦ê³¼ ì ì§„ì  í™•ì¥ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.*

### 4. GitDataParser ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ - CodePing.A
- **ëª¨ë“ˆ ë§ˆìŠ¤í„°**: 1ê°œ ì—°ê²°
- **ì§„í–‰ë¥ **: 1
- **ìƒíƒœ**: MVP ì™„ë£Œ
- **ì˜ˆìƒì‘ì—…ì‹œê°„**: 48
- **ê°œë°œLLM**: claude-4-sonnet
- **ìƒì„±ì¼**: 2025-06-25
- **ê°œë°œì**: YunJeong Kim(ê´€ë¦¬ì)
- **ì „ì²´ í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„° DB**: 1ê°œ ì—°ê²°
- **í”„ë¡¬í”„íŠ¸**: 1ê°œ ì—°ê²°
- **ì™„ë£Œì˜ˆì •ì¼**: 2025-06-27
- **ìš°ì„ ìˆœìœ„**: ë†’ìŒ
- **ì´ë¦„**: GitDataParser ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ - CodePing.A
- **ë§í¬**: [GitDataParser ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ - CodePing.A](https://www.notion.so/GitDataParser-CodePing-A-21d18a4c52a181d88c85db15b9cc8089)

**ğŸ“„ í˜ì´ì§€ ë‚´ìš©:**
  # ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
  ---
  ## ì „ì²´ êµ¬ì¡°ë„
  ```plain text
  [WebhookReceiver] â†’ [GitDataParser] â†’ [DiffAnalyzer] â†’ [DataStorage]
           â†“               â†“               â†“              â†“
      Raw Webhook   Structured Git   Parsed Diff    Database
         Data          Metadata       Analysis        Storage

  ```
  ## ê¸°ìˆ  ìŠ¤íƒ
  - **í”„ë¡ íŠ¸ì—”ë“œ**: N/A (ë°±ì—”ë“œ ëª¨ë“ˆ)
  - **ë°±ì—”ë“œ**: Python 3.11+, FastAPI
  - **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL, SQLAlchemy ORM
  - **AI/ML**: OpenAI GPT-4 API (downstream ëª¨ë“ˆì—ì„œ ì‚¬ìš©)
  - **ê¸°íƒ€**: GitPython, python-diff-parser, tree-sitter, pygments, Pydantic
  ---
  # ğŸ“¦ í´ë˜ìŠ¤ ì„¤ê³„
  ## í´ë˜ìŠ¤ 1: GitDataParser
  ### ì—­í• ê³¼ ì±…ì„
  - GitHub Webhook payloadì—ì„œ Git ì»¤ë°‹ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
  - ì»¤ë°‹ ì •ë³´, ì‘ì„±ì, ë³€ê²½ íŒŒì¼ ëª©ë¡ êµ¬ì¡°í™”
  - Raw webhook ë°ì´í„°ë¥¼ ë¶„ì„ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë³€í™˜
  - Diff ì •ë³´ ì¶”ì¶œ ë° ê¸°ë³¸ íŒŒì‹± ìˆ˜í–‰
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ | í•„ìˆ˜ì—¬ë¶€ |
  | --- | --- | --- | --- | --- |
  | webhook_payload | Dict | GitHub webhook ì›ì‹œ ë°ì´í„° | {"repository": {...}, "commits": [...]} | Required |
  | event_type | str | Webhook ì´ë²¤íŠ¸ íƒ€ì… | "push", "pull_request" | Required |
  | timestamp | datetime | ì´ë²¤íŠ¸ ë°œìƒ ì‹œê°„ | 2025-06-25T08:00:00Z | Required |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | repository_info | RepositoryInfo | ì €ì¥ì†Œ ì •ë³´ | {name, url, owner} |
  | commits_data | List[CommitData] | ì»¤ë°‹ ì •ë³´ ëª©ë¡ | [{sha, message, author, ...}] |
  | diff_metadata | DiffMetadata | Diff ë©”íƒ€ë°ì´í„° | {files_changed, lines_added, lines_deleted} |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  ## ì´ˆê¸°í™”
  1. GitPython ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸°í™”
  1. Diff parser ì„¤ì •
  1. ì§€ì› íŒŒì¼ í™•ì¥ì ëª©ë¡ ë¡œë“œ
  ## ë°ì´í„° ì²˜ë¦¬
  1. Webhook payload ê²€ì¦ ë° íŒŒì‹±
  1. Repository ì •ë³´ ì¶”ì¶œ
  1. Commit ëª©ë¡ ë°˜ë³µ ì²˜ë¦¬
  1. ê° ì»¤ë°‹ë³„ diff ì •ë³´ ì¶”ì¶œ
  1. íŒŒì¼ë³„ ë³€ê²½ì‚¬í•­ ë¶„ì„
  ## ê²°ê³¼ ë°˜í™˜
  1. êµ¬ì¡°í™”ëœ CommitData ê°ì²´ ìƒì„±
  1. DiffMetadata ì§‘ê³„
  1. RepositoryInfo ì •ë¦¬
  1. ê²€ì¦ëœ ê²°ê³¼ ë°˜í™˜
  ### í•µì‹¬ ë©”ì„œë“œ
  - `parse_webhook_data()`: Webhook payload íŒŒì‹± ë° ê¸°ë³¸ ì •ë³´ ì¶”ì¶œ
  - `extract_commit_info()`: ê°œë³„ ì»¤ë°‹ ì •ë³´ ì¶”ì¶œ
  - `parse_diff_data()`: Diff ì •ë³´ íŒŒì‹± ë° êµ¬ì¡°í™”
  - `validate_data()`: ì¶”ì¶œëœ ë°ì´í„° ê²€ì¦
  ---
  ## í´ë˜ìŠ¤ 2: DiffProcessor
  ### ì—­í• ê³¼ ì±…ì„
  - ìƒì„¸ diff ì •ë³´ íŒŒì‹± ë° ë¶„ì„
  - í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë³„ ì½”ë“œ ë³€ê²½ì‚¬í•­ í•´ì„
  - ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë³€ê²½ ê°ì§€
  - ì½”ë“œ ë³µì¡ë„ ê³„ì‚° ë° ë©”íŠ¸ë¦­ ìƒì„±
  ### Input ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ | í•„ìˆ˜ì—¬ë¶€ |
  | --- | --- | --- | --- | --- |
  | raw_diff | str | Git diff ì›ì‹œ í…ìŠ¤íŠ¸ | "@@ -1,4 +1,6 @@\n..." | Required |
  | file_path | str | ë³€ê²½ëœ íŒŒì¼ ê²½ë¡œ | "src/auth/models.py" | Required |
  | language | str | í”„ë¡œê·¸ë˜ë° ì–¸ì–´ | "python", "javascript" | Optional |
  ### Output ë°ì´í„°
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
  | --- | --- | --- | --- |
  | file_diff | FileDiff | íŒŒì¼ë³„ ë³€ê²½ì‚¬í•­ | {additions, deletions, chunks} |
  | code_analysis | CodeAnalysis | ì½”ë“œ ë¶„ì„ ê²°ê³¼ | {complexity, patterns, quality} |
  | language_metrics | LanguageMetrics | ì–¸ì–´ë³„ ë©”íŠ¸ë¦­ | {functions_added, imports_changed} |
  ### ì²˜ë¦¬ í”Œë¡œìš°
  ## ì´ˆê¸°í™”
  1. Tree-sitter íŒŒì„œ ì´ˆê¸°í™”
  1. ì–¸ì–´ë³„ ë¶„ì„ ê·œì¹™ ë¡œë“œ
  1. ì½”ë“œ ë³µì¡ë„ ë¶„ì„ê¸° ì„¤ì •
  ## ë°ì´í„° ì²˜ë¦¬
  1. Diff í…ìŠ¤íŠ¸ íŒŒì‹±
  1. ë³€ê²½ ë¸”ë¡(hunk) ë¶„ë¦¬
  1. ì–¸ì–´ ê°ì§€ ë° êµ¬ë¬¸ ë¶„ì„
  1. ì¶”ê°€/ì‚­ì œ/ìˆ˜ì • ë¼ì¸ ë¶„ë¥˜
  1. ì½”ë“œ íŒ¨í„´ ë° ë³µì¡ë„ ë¶„ì„
  ## ê²°ê³¼ ë°˜í™˜
  1. FileDiff ê°ì²´ ìƒì„±
  1. ì–¸ì–´ë³„ ë©”íŠ¸ë¦­ ê³„ì‚°
  1. ì½”ë“œ í’ˆì§ˆ ì§€í‘œ ìƒì„±
  1. ë¶„ì„ ê²°ê³¼ ê²€ì¦ ë° ë°˜í™˜
  ### í•µì‹¬ ë©”ì„œë“œ
  - `parse_diff_hunks()`: Diff hunk íŒŒì‹± ë° ë¼ì¸ë³„ ë¶„ì„
  - `analyze_code_changes()`: ì½”ë“œ ë³€ê²½ì‚¬í•­ ì˜ë¯¸ë¡ ì  ë¶„ì„
  - `calculate_complexity()`: ìˆœí™˜ ë³µì¡ë„ ë° í’ˆì§ˆ ë©”íŠ¸ë¦­ ê³„ì‚°
  - `detect_patterns()`: ì½”ë“œ íŒ¨í„´ ë° ì•„í‚¤í…ì²˜ ë³€ê²½ ê°ì§€
  ---
  # ğŸ”„ ë°ì´í„° íë¦„ë„
  ## ì „ì²´ ë°ì´í„° í”Œë¡œìš°
  ```plain text
  [Webhook Input] â†’ [GitDataParser] â†’ [DiffProcessor] â†’ [Structured Output]

  ```
  ## ìƒì„¸ ë°ì´í„° íë¦„
  ### Step 1: ë°ì´í„° ì…ë ¥
  - **Source**: GitHub Webhook API
  - **Format**: JSON payload with repository, commits, and diff data
  - **Validation**: Schema validation, required fields check
  ### Step 2: 1ì°¨ ì²˜ë¦¬
  - **Processor**: GitDataParser
  - **Input**: Raw webhook payload
  - **Output**: Structured commit metadata + basic diff info
  - **Transform**: JSON â†’ Pydantic models
  ### Step 3: 2ì°¨ ì²˜ë¦¬
  - **Processor**: DiffProcessor
  - **Input**: Raw diff strings from commits
  - **Output**: Analyzed diff data with code metrics
  - **Transform**: Raw diff â†’ FileDiff objects with analysis
  ### Step 4: ìµœì¢… ì¶œë ¥
  - **Target**: DataStorage module (downstream)
  - **Format**: Structured CommitData + DiffAnalysis objects
  - **Post-processing**: Data validation, relationship mapping
  ---
  # âš™ï¸ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­
  ## í™˜ê²½ ì„¤ì •
  - **ê°œë°œí™˜ê²½**: Python 3.11+, FastAPI development server
  - **ì˜ì¡´ì„±**:
  - **í™˜ê²½ë³€ìˆ˜**:
  ## í•µì‹¬ ë¡œì§
  ### ì•Œê³ ë¦¬ì¦˜ 1: Webhook Data Parsing
  ```python
  def parse_webhook_data(webhook_payload: Dict) -> ParsedWebhookData:
      """
      GitHub webhook payloadë¥¼ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ë³€í™˜

      Args:
          webhook_payload: GitHub webhook raw data

      Returns:
          ParsedWebhookData: êµ¬ì¡°í™”ëœ ì»¤ë°‹ ë° ì €ì¥ì†Œ ì •ë³´
      """
      repository_info = extract_repository_info(webhook_payload)
      commits_data = []

      for commit in webhook_payload.get('commits', []):
          commit_data = CommitData(
              sha=commit['id'],
              message=commit['message'],
              author=Author(
                  name=commit['author']['name'],
                  email=commit['author']['email'],
                  username=commit['author'].get('username')
              ),
              timestamp=parse_iso_datetime(commit['timestamp']),
              added_files=commit.get('added', []),
              modified_files=commit.get('modified', []),
              removed_files=commit.get('removed', [])
          )
          commits_data.append(commit_data)

      return ParsedWebhookData(
          repository=repository_info,
          commits=commits_data,
          event_type=webhook_payload.get('event_type', 'push')
      )

  ```
  ### ì•Œê³ ë¦¬ì¦˜ 2: Diff Processing
  ```python
  def process_diff_data(commit_sha: str, diff_text: str) -> List[FileDiff]:
      """
      Git diff í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ íŒŒì¼ë³„ ë³€ê²½ì‚¬í•­ ë¶„ì„

      Args:
          commit_sha: ì»¤ë°‹ í•´ì‹œ
          diff_text: Git diff ì›ì‹œ í…ìŠ¤íŠ¸

      Returns:
          List[FileDiff]: íŒŒì¼ë³„ ë³€ê²½ì‚¬í•­ ëª©ë¡
      """
      diff_parser = DiffParser()
      parsed_diff = diff_parser.parse(diff_text)

      file_diffs = []
      for file_data in parsed_diff.files:
          language = detect_language(file_data.path)

          file_diff = FileDiff(
              file_path=file_data.path,
              additions=file_data.additions,
              deletions=file_data.deletions,
              is_binary=file_data.is_binary,
              language=language,
              hunks=process_hunks(file_data.hunks, language)
          )
          file_diffs.append(file_diff)

      return file_diffs

  ```
  ## ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
  - **ë³‘ëª© ì§€ì **: ëŒ€ìš©ëŸ‰ diff íŒŒì‹±, tree-sitter êµ¬ë¬¸ ë¶„ì„
  - **ìµœì í™” ë°©ì•ˆ**:
  - **í™•ì¥ì„±**:
  ---
  # ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš
  ## ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
  GitDataParser.parse_webhook_data() í…ŒìŠ¤íŠ¸
  DiffProcessor.process_diff_data() í…ŒìŠ¤íŠ¸
  ì–¸ì–´ë³„ ì½”ë“œ ë¶„ì„ í…ŒìŠ¤íŠ¸
  ì—ëŸ¬ ì¼€ì´ìŠ¤ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
  ## í†µí•© í…ŒìŠ¤íŠ¸
  ì „ì²´ íŒŒì‹± í”Œë¡œìš° í…ŒìŠ¤íŠ¸
  ë‹¤ì–‘í•œ GitHub ì´ë²¤íŠ¸ íƒ€ì… í…ŒìŠ¤íŠ¸
  ëŒ€ìš©ëŸ‰ diff ì²˜ë¦¬ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  ## í…ŒìŠ¤íŠ¸ ë°ì´í„°
  | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | ì…ë ¥ ë°ì´í„° | ì˜ˆìƒ ê²°ê³¼ | ìš°ì„ ìˆœìœ„ | ìƒíƒœ |
  | --- | --- | --- | --- | --- |
  | ê¸°ë³¸ push ì´ë²¤íŠ¸ | sample_push_webhook.json | ì •ìƒ íŒŒì‹± | High | Pending |
  | ëŒ€ìš©ëŸ‰ diff | large_diff_webhook.json | ì„±ëŠ¥ ìµœì í™” | Medium | Pending |
  | ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë³€ê²½ | binary_change_webhook.json | ë°”ì´ë„ˆë¦¬ ê°ì§€ | Medium | Pending |
  | ë‹¤êµ­ì–´ ì½”ë“œ | multilang_webhook.json | ì–¸ì–´ë³„ ë¶„ì„ | Low | Pending |
  ---
  # ğŸ“ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸
  ## Phase 1: ê¸°ë³¸ êµ¬ì¡°
  í”„ë¡œì íŠ¸ ì…‹ì—… ë° ì˜ì¡´ì„± ì„¤ì¹˜
  Pydantic ëª¨ë¸ ì •ì˜ (CommitData, FileDiff, etc.)
  GitDataParser í´ë˜ìŠ¤ ê¸°ë³¸ í‹€ êµ¬í˜„
  ## Phase 2: í•µì‹¬ ë¡œì§
  Webhook payload íŒŒì‹± ë¡œì§ êµ¬í˜„
  Git diff ì¶”ì¶œ ë° ê¸°ë³¸ ë¶„ì„
  DiffProcessor í´ë˜ìŠ¤ êµ¬í˜„
  ì–¸ì–´ë³„ ì½”ë“œ ë¶„ì„ ë¡œì§ ì¶”ê°€
  ## Phase 3: ìµœì í™” & í…ŒìŠ¤íŠ¸
  ì„±ëŠ¥ ìµœì í™” (ë¹„ë™ê¸° ì²˜ë¦¬, ìºì‹±)
  ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±
  ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹… ê°•í™”
  API ë¬¸ì„œí™” ì™„ë£Œ
  ---
  # ğŸ”— ê´€ë ¨ ë¦¬ì†ŒìŠ¤
  ## ì°¸ì¡° ë¬¸ì„œ
  - [CodePing.AI í”„ë¡œì íŠ¸ ê¸°íšì„œ - ë³´ì™„ëœ ë²„ì „](https://www.notion.so/CodePing-AI-21c18a4c52a1804ba78ddbcc2ba649d4)
  - [VIVECODING ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ ì‘ì„± í”„ë¡¬í”„íŠ¸](https://www.notion.so/VIVECODING-21c18a4c52a180878e1feef42a4a52e2)
  - [GitHub Webhooks API Documentation](https://docs.github.com/en/developers/webhooks-and-events/webhooks)
  ## ì½”ë“œ ì €ì¥ì†Œ
  - **Repository**: CodePing.AI (ì˜ˆì •)
  - **Branch**: feature/git-data-parser
  - **Main Files**:
  ## í˜‘ì—… ë„êµ¬
  - **Issue Tracker**: GitHub Issues
  - **Communication**: Slack (#codeping-dev)
  - **Documentation**: Notion Wiki
  ---
  # ğŸ“Š ì§„í–‰ ìƒí™©
  ## í˜„ì¬ ì§„í–‰ë¥ 
  - **ì „ì²´ ì§„í–‰ë¥ **: 0% (ì„¤ê³„ ë‹¨ê³„)
  - **ì„¤ê³„ ì™„ë£Œ**: 100%
  - **êµ¬í˜„ ì™„ë£Œ**: 0%
  - **í…ŒìŠ¤íŠ¸ ì™„ë£Œ**: 0%
  ## ë‹¤ìŒ ë‹¨ê³„
  1. Python ê°œë°œ í™˜ê²½ ì„¤ì • ë° ì˜ì¡´ì„± ì„¤ì¹˜
  1. Pydantic ë°ì´í„° ëª¨ë¸ ì •ì˜
  1. GitDataParser í´ë˜ìŠ¤ ê¸°ë³¸ êµ¬í˜„
  ## ë¸”ë¡œì»¤ ë° ì´ìŠˆ
  - ëŒ€ìš©ëŸ‰ diff ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™” í•„ìš”
  - Tree-sitter íŒŒì„œ ì„¤ì •ì˜ ë³µì¡ë„
  - GitHub API ì†ë„ ì œí•œ ê³ ë ¤ í•„ìš”
  ---
  26ì¼ mvp ë²„ì „ìœ¼ë¡œ êµ¬í˜„ í™•ì •
  ## **ğŸ¯ GitDataParser MVP ì„¤ê³„ì•ˆ**
  **ğŸ“‹ MVPÂ ë²”ìœ„ ì •ì˜**
  **âœ… MVPì— í¬í•¨í• Â í•µì‹¬ ê¸°ëŠ¥**
  1. **WebhookÂ ë°ì´í„° íŒŒì‹±**: GitHub pushÂ ì´ë²¤íŠ¸ ê¸°ë³¸ ì •ë³´ ì¶”ì¶œ
  1. **ì»¤ë°‹ ì •ë³´ êµ¬ì¡°í™”**: SHA, ë©”ì‹œì§€, ì‘ì„±ì, íƒ€ì„ìŠ¤íƒ¬í”„
  1. **ê¸°ë³¸Â Diff ì²˜ë¦¬**: íŒŒì¼Â ë³€ê²½Â ëª©ë¡, ë¼ì¸ ìˆ˜Â í†µê³„
  1. **íŒŒì¼ ë³€ê²½ì‚¬í•­ ë¶„ì„**: ì¶”ê°€/ìˆ˜ì •/ì‚­ì œëœÂ íŒŒì¼ ëª©ë¡
  1. **í‘œì¤€í™”ëœ ë°ì´í„° ëª¨ë¸**: ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ëª¨ë“ˆê³¼ì˜ ì¸í„°í˜ì´ìŠ¤
  1. 1. **WebhookÂ ë°ì´í„° íŒŒì‹±**: GitHub pushÂ ì´ë²¤íŠ¸ ê¸°ë³¸ ì •ë³´ ì¶”ì¶œ
  1. 1. **ì»¤ë°‹ ì •ë³´ êµ¬ì¡°í™”**: SHA, ë©”ì‹œì§€, ì‘ì„±ì, íƒ€ì„ìŠ¤íƒ¬í”„
  1. 1. **ê¸°ë³¸Â Diff ì²˜ë¦¬**: íŒŒì¼Â ë³€ê²½Â ëª©ë¡, ë¼ì¸ ìˆ˜Â í†µê³„
  1. 1. **íŒŒì¼ ë³€ê²½ì‚¬í•­ ë¶„ì„**: ì¶”ê°€/ìˆ˜ì •/ì‚­ì œëœÂ íŒŒì¼ ëª©ë¡
  1. 1. **í‘œì¤€í™”ëœ ë°ì´í„° ëª¨ë¸**: ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ëª¨ë“ˆê³¼ì˜ ì¸í„°í˜ì´ìŠ¤
  ### **ğŸš« MVPì—ì„œ ì œì™¸í•  ê³ ê¸‰ ê¸°ëŠ¥**
  - ì½”ë“œ ë³µì¡ë„ ê³„ì‚°Â (tree-sitter, radon)
  - ì–¸ì–´ë³„ êµ¬ë¬¸ ë¶„ì„
  - ì˜ë¯¸ë¡ ì  ì½”ë“œ ë¶„ì„
  - ì½”ë“œ íŒ¨í„´ ê°ì§€
  - ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  ---
  *ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-06-26*

### 5. WebhookReceiver ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ - CodePing.AI (diff ë¶„ì„ ì¤‘ì‹¬)
- **ëª¨ë“ˆ ë§ˆìŠ¤í„°**: 1ê°œ ì—°ê²°
- **ì§„í–‰ë¥ **: 0.8
- **ìƒíƒœ**: MVP ì™„ë£Œ
- **ì˜ˆìƒì‘ì—…ì‹œê°„**: 120
- **ê°œë°œLLM**: o3
- **ìƒì„±ì¼**: 2025-06-24
- **ê°œë°œì**: YunJeong Kim(ê´€ë¦¬ì)
- **ì „ì²´ í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„° DB**: 1ê°œ ì—°ê²°
- **í”„ë¡¬í”„íŠ¸**: 1ê°œ ì—°ê²°
- **ì™„ë£Œì˜ˆì •ì¼**: 2025-06-25
- **ìš°ì„ ìˆœìœ„**: ë†’ìŒ
- **ì´ë¦„**: WebhookReceiver ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ - CodePing.AI (diff ë¶„ì„ ì¤‘ì‹¬)
- **ë§í¬**: [WebhookReceiver ëª¨ë“ˆ ìƒì„¸ì„¤ê³„ì„œ - CodePing.AI (diff ë¶„ì„ ì¤‘ì‹¬)](https://www.notion.so/WebhookReceiver-CodePing-AI-diff-21c18a4c52a181809189f5cdd6555379)

**ğŸ“„ í˜ì´ì§€ ë‚´ìš©:**
  ### ì „ì²´ êµ¬ì¡°ë„ (í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ + diff ì²˜ë¦¬)
  ```plain text


  [GitHub Webhook with diff] â†’ [PlatformRouter] â†’ [Built-in Processors | Plugin Manager]
                                          â†“                    â†“                â†“
                                [Platform Detection]    [GitHub/GitLab]    [Extensions]
                                          â†“                    â†“                â†“
                                  [Core vs Extension]    [Fast Processing]  [Dynamic Loading]
                                          â†“                    â†“                â†“
                                  [DiffAnalyzer ì—°ê³„]    [Complete Payload]  [Diff Extraction]

  ```
  ### í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜ ì„¤ê³„ (diff ì •ë³´ ì¤‘ì‹¬)
  ```plain text


  Core Platforms (Built-in)           Extension Platforms (Plugin)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â€¢ GitHub (diff ì „ì²´ë³´ì¡´)    â”‚       â”‚ â€¢ Bitbucket                 â”‚
  â”‚ â€¢ GitLab (diff ì „ì²´ë³´ì¡´)    â”‚  VS   â”‚ â€¢ Azure DevOps              â”‚
  â”‚ â€¢ (í–¥í›„ 1-2ê°œ ì¶”ê°€)         â”‚       â”‚ â€¢ Custom SCM                â”‚
  â”‚                             â”‚       â”‚ â€¢ Third-party               â”‚
  â”‚ ì¡°ê±´ë¶€ ë¶„ê¸° (ì„±ëŠ¥)          â”‚       â”‚ í”ŒëŸ¬ê·¸ì¸ (í™•ì¥ì„±)           â”‚
  â”‚ + diff ì •ë³´ ì™„ì „ ë³´ì¡´       â”‚       â”‚ + diff ì •ë³´ í‘œì¤€í™”          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ```
  ### ê¸°ìˆ  ìŠ¤íƒ (diff ì²˜ë¦¬ ì¶”ê°€)
  - **í”„ë¡ íŠ¸ì—”ë“œ**: í•´ë‹¹ì—†ìŒ (ë°±ì—”ë“œ ì „ìš© ëª¨ë“ˆ)
  - **ë°±ì—”ë“œ**: Python 3.11+, FastAPI, Pydantic
  - **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL 16, SQLAlchemy ORM
  - **í•µì‹¬ SCM**: GitHub, GitLab (ë¹ŒíŠ¸ì¸) + **diff ì •ë³´ ì™„ì „ ë³´ì¡´**
  - **í™•ì¥ SCM**: Plugin ì‹œìŠ¤í…œ (ë™ì  ë¡œë”©) + **diff ì •ë³´ í‘œì¤€í™”**
  - **diff ì²˜ë¦¬**: GitPython, python-diff-parser, tree-sitter
  - **ê¸°íƒ€**: uvicorn, pytest, importlib
  ---
  ## ğŸ“¦ í´ë˜ìŠ¤ ì„¤ê³„
  ### í´ë˜ìŠ¤ 1: PlatformRouter (í•˜ì´ë¸Œë¦¬ë“œ ë¼ìš°í„° + diff ì¸ì‹)
  | í•­ëª© | ë‚´ìš© | ë¹„ê³  |
  | --- | --- | --- |
  | í´ë˜ìŠ¤ëª… | PlatformRouter | í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ ë¼ìš°í„° |
  | ìƒì†/êµ¬í˜„ | BaseRouter | ê¸°ë³¸ ë¼ìš°í„° ì¸í„°í˜ì´ìŠ¤ |
  | ì£¼ìš”ì—­í•  | í”Œë«í¼ ê°ì§€ ë° ë¼ìš°íŒ… | diff ì •ë³´ í¬í•¨ |
  | ì„±ëŠ¥ëª©í‘œ | <50ms ì‘ë‹µì‹œê°„ | í•µì‹¬ í”Œë«í¼ ê¸°ì¤€ |
  | í™•ì¥ì„± | Plugin ì§€ì› | ë™ì  ë¡œë”© |
  ### ì—­í• ê³¼ ì±…ì„ (diff ì •ë³´ ì²˜ë¦¬ ì¶”ê°€)
  - HTTP ìš”ì²­ì—ì„œ SCM í”Œë«í¼ ìë™ ê°ì§€
  - **diff ì •ë³´ í¬í•¨ ì—¬ë¶€ í™•ì¸ ë° ë³´ì¡´**
  - í•µì‹¬ í”Œë«í¼ vs í™•ì¥ í”Œë«í¼ ë¶„ë¥˜
  - ì ì ˆí•œ ì²˜ë¦¬ê¸°ë¡œ ë¼ìš°íŒ… (ë¹ŒíŠ¸ì¸ vs í”ŒëŸ¬ê·¸ì¸)
  - **ì „ì²´ webhook payload ë³´ì¡´ (diff ì •ë³´ í¬í•¨)**
  - í†µí•©ëœ ì‘ë‹µ ì¸í„°í˜ì´ìŠ¤ ì œê³µ
  ### Input ë°ì´í„° (diff ì •ë³´ ì¶”ê°€)
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | í•„ìˆ˜ì—¬ë¶€ |
  | --- | --- | --- | --- |
  | request | HTTPRequest | ì „ì²´ webhook ìš”ì²­ | í•„ìˆ˜ |
  | headers | Dict[str, str] | HTTP í—¤ë” ì •ë³´ | í•„ìˆ˜ |
  | payload | Dict[str, Any] | ì „ì²´ payload (diff í¬í•¨) | í•„ìˆ˜ |
  | platform_hint | Optional[str] | í”Œë«í¼ íŒíŠ¸ | ì„ íƒ |
  ### Output ë°ì´í„° (diff ì •ë³´ í¬í•¨)
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | í¬í•¨ë‚´ìš© |
  | --- | --- | --- | --- |
  | routing_info | RoutingInfo | ë¼ìš°íŒ… ê²°ê³¼ | í”Œë«í¼, ì²˜ë¦¬ê¸° |
  | complete_payload | Dict[str, Any] | ì „ì²´ payload ë³´ì¡´ | diff ì •ë³´ í¬í•¨ |
  | platform | str | ê°ì§€ëœ í”Œë«í¼ | github, gitlab ë“± |
  | processor_type | str | ì²˜ë¦¬ê¸° ìœ í˜• | core, extension |
  ### ì²˜ë¦¬ í”Œë¡œìš° (diff ì •ë³´ ì¤‘ì‹¬)
  ## ì´ˆê¸°í™”
  1. í•µì‹¬ í”Œë«í¼ ëª©ë¡ ì„¤ì • ('github', 'gitlab')
  1. í”ŒëŸ¬ê·¸ì¸ ë§¤ë‹ˆì € ì´ˆê¸°í™”
  1. í”Œë«í¼ ê°ì§€ ê·œì¹™ ë¡œë“œ
  1. **diff ì •ë³´ ë³´ì¡´ ì„¤ì • í™•ì¸**
  ## ë°ì´í„° ì²˜ë¦¬
  1. HTTP í—¤ë” ê¸°ë°˜ í”Œë«í¼ ê°ì§€
  1. **diff ì •ë³´ í¬í•¨ ì—¬ë¶€ í™•ì¸**
  1. í•µì‹¬ í”Œë«í¼ ì—¬ë¶€ íŒë‹¨
  1. ì ì ˆí•œ ì²˜ë¦¬ê¸°ë¡œ ë¼ìš°íŒ…
  1. **ì „ì²´ payload ë³´ì¡´ (diff ì •ë³´ í¬í•¨)**
  1. ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  ## ê²°ê³¼ ë°˜í™˜
  1. ë¼ìš°íŒ… ì •ë³´ ë°˜í™˜
  1. **ì™„ì „í•œ payload ë°ì´í„° ì „ë‹¬**
  1. ì²˜ë¦¬ ê²°ê³¼ í†µí•© í¬ë§· ì ìš©
  ### í•µì‹¬ ë©”ì„œë“œ (diff ì²˜ë¦¬ ì¶”ê°€)
  - `detect_platform()`: í”Œë«í¼ ìë™ ê°ì§€
  - `is_core_platform()`: í•µì‹¬ í”Œë«í¼ ì—¬ë¶€ íŒë‹¨
  - `route_to_processor()`: ì ì ˆí•œ ì²˜ë¦¬ê¸°ë¡œ ë¼ìš°íŒ…
  - `unify_response()`: ì‘ë‹µ í˜•ì‹ í†µí•©
  - `**preserve_diff_data()**`**: diff ì •ë³´ ë³´ì¡´**
  - `**validate_diff_completeness()**`**: diff ì™„ì „ì„± ê²€ì¦**
  ---
  ### í´ë˜ìŠ¤ 2: CorePlatformProcessor (ë¹ŒíŠ¸ì¸ ì²˜ë¦¬ê¸° + diff ë¶„ì„)
  ### ì—­í• ê³¼ ì±…ì„ (diff ì²˜ë¦¬ ì¤‘ì‹¬)
  - GitHub, GitLab ë“± í•µì‹¬ í”Œë«í¼ ì „ìš© ê³ ì„±ëŠ¥ ì²˜ë¦¬
  - **ì½”ë“œ ë³€ê²½ì‚¬í•­(diff) ìƒì„¸ ë¶„ì„ ë° ë³´ì¡´**
  - ì¡°ê±´ë¶€ ë¶„ê¸°ë¥¼ í†µí•œ ìµœì í™”ëœ ì²˜ë¦¬ ë¡œì§
  - í”Œë«í¼ë³„ íŠ¹í™” ê¸°ëŠ¥ êµ¬í˜„
  - **diff ì •ë³´ë¥¼ í¬í•¨í•œ ì™„ì „í•œ ë°ì´í„° ì¶”ì¶œ**
  - ë¹ ë¥¸ ì‘ë‹µ ì‹œê°„ ë³´ì¥
  ### Input ë°ì´í„° (diff ì •ë³´ ì¤‘ì‹¬)
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | diff ê´€ë ¨ |
  | --- | --- | --- | --- |
  | platform | str | í”Œë«í¼ ì‹ë³„ì | github, gitlab |
  | raw_payload | Dict[str, Any] | ì›ë³¸ webhook payload | diff ì •ë³´ í¬í•¨ |
  | headers | Dict[str, str] | HTTP í—¤ë” | ì„œëª… ê²€ì¦ìš© |
  | config | PlatformConfig | í”Œë«í¼ ì„¤ì • | diff ì²˜ë¦¬ ì˜µì…˜ |
  | diff_options | DiffOptions | diff ì²˜ë¦¬ ì˜µì…˜ | ìƒˆë¡œ ì¶”ê°€ |
  ### Output ë°ì´í„° (diff í¬í•¨)
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | diff ê´€ë ¨ |
  | --- | --- | --- | --- |
  | processed_data | ProcessedData | ì²˜ë¦¬ëœ ë°ì´í„° | diff ì •ë³´ í¬í•¨ |
  | validation_result | bool | ê²€ì¦ ê²°ê³¼ | ì„œëª… ë“± |
  | performance_metrics | Dict | ì„±ëŠ¥ ì§€í‘œ | ì²˜ë¦¬ ì‹œê°„ ë“± |
  | diff_summary | DiffSummary | diff ìš”ì•½ ì •ë³´ | ìƒˆë¡œ ì¶”ê°€ |
  ### ì²˜ë¦¬ í”Œë¡œìš° (diff ì¤‘ì‹¬)
  ## ì´ˆê¸°í™”
  1. GitHub/GitLab ì „ìš© ê²€ì¦ê¸° ì´ˆê¸°í™”
  1. í”Œë«í¼ë³„ ìµœì í™”ëœ íŒŒì„œ ë¡œë“œ
  1. **diff ë¶„ì„ê¸° ì´ˆê¸°í™”**
  1. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì„¤ì •
  ## ë°ì´í„° ì²˜ë¦¬
  1. í”Œë«í¼ë³„ ì¡°ê±´ë¶€ ë¶„ê¸° ì‹¤í–‰
  1. ìµœì í™”ëœ ì„œëª… ê²€ì¦
  1. **diff ì •ë³´ ìƒì„¸ ë¶„ì„ ë° ì¶”ì¶œ**
  1. ê³ ì„±ëŠ¥ ë°ì´í„° íŒŒì‹±
  1. í”Œë«í¼ íŠ¹í™” ê¸°ëŠ¥ ì²˜ë¦¬
  1. **ì½”ë“œ ë³€ê²½ì‚¬í•­ ì˜ë¯¸ë¡ ì  ë¶„ì„**
  ## ê²°ê³¼ ë°˜í™˜
  1. í‘œì¤€ í˜•ì‹ìœ¼ë¡œ ë°ì´í„° ë°˜í™˜
  1. **diff ë¶„ì„ ê²°ê³¼ í¬í•¨**
  1. ì„±ëŠ¥ ë©”íŠ¸ë¦­ í¬í•¨
  ### í•µì‹¬ ë©”ì„œë“œ (diff ì²˜ë¦¬ ì¶”ê°€)
  - `process_github()`: GitHub ì „ìš© ìµœì í™” ì²˜ë¦¬
  - `process_gitlab()`: GitLab ì „ìš© ìµœì í™” ì²˜ë¦¬
  - `verify_core_signature()`: í•µì‹¬ í”Œë«í¼ ì„œëª… ê²€ì¦
  - `parse_core_payload()`: ê³ ì„±ëŠ¥ í˜ì´ë¡œë“œ íŒŒì‹±
  - `**extract_diff_data()**`**: diff ì •ë³´ ì¶”ì¶œ**
  - `**analyze_code_changes()**`**: ì½”ë“œ ë³€ê²½ì‚¬í•­ ë¶„ì„**
  ---
  ### í´ë˜ìŠ¤ 3: ExtensionPluginManager (í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ì + diff í‘œì¤€í™”)
  ### ì—­í• ê³¼ ì±…ì„ (diff í‘œì¤€í™” ì¶”ê°€)
  - í™•ì¥ í”Œë«í¼ìš© í”ŒëŸ¬ê·¸ì¸ ë™ì  ë¡œë”©
  - **ë‹¤ì–‘í•œ í”Œë«í¼ì˜ diff ì •ë³´ í‘œì¤€í™”**
  - í”ŒëŸ¬ê·¸ì¸ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬
  - í”ŒëŸ¬ê·¸ì¸ ê°„ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ ê°•ì œ
  - **diff ì •ë³´ í†µí•© í˜•ì‹ ì œê³µ**
  - í”ŒëŸ¬ê·¸ì¸ ì„¤ì • ë° ë³´ì•ˆ ê´€ë¦¬
  ### Input ë°ì´í„° (diff í‘œì¤€í™”)
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | diff ê´€ë ¨ |
  | --- | --- | --- | --- |
  | plugin_name | str | í”ŒëŸ¬ê·¸ì¸ ì‹ë³„ì | bitbucket, azure ë“± |
  | raw_data | Dict[str, Any] | ì›ë³¸ ë°ì´í„° | í”Œë«í¼ë³„ diff í˜•ì‹ |
  | plugin_config | Dict | í”ŒëŸ¬ê·¸ì¸ ì„¤ì • | diff ì²˜ë¦¬ ì˜µì…˜ |
  | security_context | SecurityContext | ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ | í”ŒëŸ¬ê·¸ì¸ ê¶Œí•œ |
  | diff_schema | DiffSchema | diff ìŠ¤í‚¤ë§ˆ | í‘œì¤€í™” ê·œì¹™ |
  ### Output ë°ì´í„° (í‘œì¤€í™”ëœ diff)
  | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | diff ê´€ë ¨ |
  | --- | --- | --- | --- |
  | standardized_data | StandardData | í‘œì¤€í™”ëœ ë°ì´í„° | í†µí•© diff í˜•ì‹ |
  | plugin_status | PluginStatus | í”ŒëŸ¬ê·¸ì¸ ìƒíƒœ | ì„±ê³µ/ì‹¤íŒ¨ |
  | processing_log | List[str] | ì²˜ë¦¬ ë¡œê·¸ | ë””ë²„ê¹…ìš© |
  | normalized_diff | NormalizedDiff | ì •ê·œí™”ëœ diff | í‘œì¤€ í˜•ì‹ |
  ### ì²˜ë¦¬ í”Œë¡œìš° (diff í‘œì¤€í™” ì¤‘ì‹¬)
  ## ì´ˆê¸°í™”
  1. í”ŒëŸ¬ê·¸ì¸ ë””ë ‰í† ë¦¬ ìŠ¤ìº”
  1. IExtensionPlugin ì¸í„°í˜ì´ìŠ¤ í™•ì¸
  1. **diff í‘œì¤€í™” ìŠ¤í‚¤ë§ˆ ë¡œë“œ**
  1. í”ŒëŸ¬ê·¸ì¸ ë©”íƒ€ë°ì´í„° ë¡œë“œ
  1. ë³´ì•ˆ ê²€ì¦ ë° ë“±ë¡
  ## ë°ì´í„° ì²˜ë¦¬
  1. ìš”ì²­ëœ í”ŒëŸ¬ê·¸ì¸ ê²€ìƒ‰
  1. **í”Œë«í¼ë³„ diff í˜•ì‹ ì¸ì‹**
  1. í”ŒëŸ¬ê·¸ì¸ ë™ì  ë¡œë”©
  1. í”ŒëŸ¬ê·¸ì¸ ë©”ì„œë“œ í˜¸ì¶œ
  1. **diff ì •ë³´ í‘œì¤€í™” ë³€í™˜**
  1. ì—ëŸ¬ ì²˜ë¦¬ ë° í´ë°±
  ## ê²°ê³¼ ë°˜í™˜
  1. í”ŒëŸ¬ê·¸ì¸ ì²˜ë¦¬ ê²°ê³¼ ë°˜í™˜
  1. **í‘œì¤€í™”ëœ diff ì •ë³´ ì œê³µ**
  1. ì‹¤íŒ¨ì‹œ ê¸°ë³¸ ì²˜ë¦¬ê¸° ì‚¬ìš©
  ### í•µì‹¬ ë©”ì„œë“œ (diff í‘œì¤€í™” ì¶”ê°€)
  - `load_extension_plugin()`: í™•ì¥ í”ŒëŸ¬ê·¸ì¸ ë™ì  ë¡œë”©
  - `validate_plugin_interface()`: í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤ ê²€ì¦
  - `**standardize_diff_format()**`**: diff í˜•ì‹ í‘œì¤€í™”**
  - `**normalize_code_changes()**`**: ì½”ë“œ ë³€ê²½ì‚¬í•­ ì •ê·œí™”**
  - `manage_plugin_lifecycle()`: í”ŒëŸ¬ê·¸ì¸ ìƒëª…ì£¼ê¸° ê´€ë¦¬
  - `enforce_security_policy()`: ë³´ì•ˆ ì •ì±… ê°•ì œ
  ---
  ## ğŸ”„ ìˆ˜ì •ëœ ë°ì´í„° íë¦„ (diff ì¤‘ì‹¬)
  ```plain text


  GitHub Webhook (with complete diff)
      â†“
  [WebhookReceiver] - ì „ì²´ payload ë³´ì¡´ (diff ì •ë³´ í¬í•¨)
      â†“
  [PlatformRouter] - í”Œë«í¼ ê°ì§€ + diff ì •ë³´ ë³´ì¡´
      â†“
  [CorePlatformProcessor] - diff ìƒì„¸ ë¶„ì„ ë° ì¶”ì¶œ
      â†“
  [DiffAnalyzer ì—°ê³„] - ì½”ë“œ ë³€ê²½ì‚¬í•­ ì˜ë¯¸ë¡ ì  ë¶„ì„
      â†“
  [GitDataParser ì „ë‹¬] - êµ¬ì¡°í™”ëœ diff ë°ì´í„° ìƒì„±

  ```
  ---
  ## ğŸ¯ diff ì²˜ë¦¬ í•µì‹¬ ìš”êµ¬ì‚¬í•­
  ### WebhookReceiverì˜ diff ì²˜ë¦¬ ì±…ì„
  1. **ì™„ì „í•œ payload ë³´ì¡´**: GitHub webhookì˜ ëª¨ë“  diff ì •ë³´ ì†ì‹¤ ì—†ì´ ë³´ì¡´
  1. **diff ì •ë³´ ê°ì§€**: webhookì— diff ì •ë³´ í¬í•¨ ì—¬ë¶€ ìë™ ê°ì§€
  1. **í”Œë«í¼ë³„ ì°¨ë³„í™”**: GitHubê³¼ GitLabì˜ diff í˜•ì‹ ì°¨ì´ ì¸ì‹
  1. **í‘œì¤€í™” ì¤€ë¹„**: ë‹¤ìŒ ëª¨ë“ˆ(GitDataParser)ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ì „ë‹¬
  1. **ì„±ëŠ¥ ìµœì í™”**: ëŒ€ìš©ëŸ‰ diff ì •ë³´ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ë³´ì¥
  ### ì¶”ê°€ëœ í•µì‹¬ ê¸°ëŠ¥
  - **DiffPreservationManager**: diff ì •ë³´ ì™„ì „ ë³´ì¡´ ê´€ë¦¬
  - **PayloadValidator**: diff í¬í•¨ payload ê²€ì¦
  - **PlatformDiffDetector**: í”Œë«í¼ë³„ diff í˜•ì‹ ê°ì§€
  - **MemoryOptimizer**: ëŒ€ìš©ëŸ‰ diff ì²˜ë¦¬ ìµœì í™”
  ì´ ì„¤ê³„ì„œëŠ” **ìµœì‹  ê¸°íšì„œì˜ diff ë¶„ì„ ì¤‘ì‹¬ ìš”êµ¬ì‚¬í•­**ì„ ì™„ì „íˆ ë°˜ì˜í•˜ì—¬, WebhookReceiver ëª¨ë“ˆì´ ì½”ë“œ ë³€ê²½ì‚¬í•­ì„ ì™„ì „íˆ ë³´ì¡´í•˜ê³  ë‹¤ìŒ ë‹¨ê³„ ë¶„ì„ì„ ìœ„í•œ ê¸°ë°˜ì„ ì œê³µí•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
