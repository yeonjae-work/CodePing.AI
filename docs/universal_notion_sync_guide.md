# ë²”ìš© Notion ë™ê¸°í™” ëª¨ë“ˆ ì‚¬ìš© ê°€ì´ë“œ

ì´ ê°€ì´ë“œëŠ” **ì™„ì „íˆ ë…ë¦½ì ìœ¼ë¡œ ì„¤ê³„ëœ ë²”ìš© Notion ë™ê¸°í™” ëª¨ë“ˆ**ì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì„¤ì¹˜ ë° ì„¤ì •](#ì„¤ì¹˜-ë°-ì„¤ì •)
3. [ê¸°ë³¸ ì‚¬ìš©ë²•](#ê¸°ë³¸-ì‚¬ìš©ë²•)
4. [ê³ ê¸‰ ê¸°ëŠ¥](#ê³ ê¸‰-ê¸°ëŠ¥)
5. [API ë ˆí¼ëŸ°ìŠ¤](#api-ë ˆí¼ëŸ°ìŠ¤)
6. [ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ](#ì‹¤ì œ-ì‚¬ìš©-ì˜ˆì‹œ)
7. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ğŸ“– ê°œìš”

### íŠ¹ì§•

âœ… **ì™„ì „ ë…ë¦½ì **: í”„ë¡œì íŠ¸ë³„ ì˜ì¡´ì„± ì—†ìŒ, ì–´ë–¤ í”„ë¡œì íŠ¸ì—ì„œë„ ì¬ì‚¬ìš© ê°€ëŠ¥  
âœ… **ë²”ìš© ì„¤ê³„**: ì–´ë–¤ Notion ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥  
âœ… **ê´€ê³„ ê¸°ë°˜ í•„í„°ë§**: ë°ì´í„°ë² ì´ìŠ¤ ê´€ê³„ ì†ì„±ìœ¼ë¡œ í•„í„°ë§ ì§€ì›  
âœ… **ì™„ì „í•œ í…Œì´ë¸” ì²˜ë¦¬**: ë…¸ì…˜ í…Œì´ë¸” â†’ ë§ˆí¬ë‹¤ìš´ í…Œì´ë¸” ì™„ë²½ ë³€í™˜  
âœ… **ë‹¤ì–‘í•œ ì¶œë ¥ í˜•ì‹**: Markdown, JSON, Plain Text  
âœ… **CLI ë„êµ¬**: ì™„ì „ ë…ë¦½ì ì¸ ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤  
âœ… **ì¦ë¶„ ë™ê¸°í™”**: ë³€ê²½ëœ ë‚´ìš©ë§Œ íš¨ìœ¨ì ìœ¼ë¡œ ë™ê¸°í™”  
âœ… **ê³„ì¸µ êµ¬ì¡° ë°œê²¬**: ë°ì´í„°ë² ì´ìŠ¤ ê°„ ê´€ê³„ ìë™ íƒìƒ‰  

### ì§€ì› ê¸°ëŠ¥

- **í˜ì´ì§€ ë™ê¸°í™”**: Notion í˜ì´ì§€ë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜ (ëª¨ë“  ë¸”ë¡ íƒ€ì… ì§€ì›)
- **ë°ì´í„°ë² ì´ìŠ¤ ë™ê¸°í™”**: ìŠ¤í‚¤ë§ˆ, ë©”íƒ€ë°ì´í„°, í˜ì´ì§€ ë‚´ìš© ëª¨ë‘ ì¶”ì¶œ
- **í…Œì´ë¸” ë¸”ë¡ ì²˜ë¦¬**: ë…¸ì…˜ í…Œì´ë¸”ì„ ë§ˆí¬ë‹¤ìš´ í…Œì´ë¸”ë¡œ ì™„ë²½ ë³€í™˜
- **ê´€ê³„ í•„í„°ë§**: íŠ¹ì • í˜ì´ì§€ì™€ ê´€ë ¨ëœ ë°ì´í„°ë§Œ ë™ê¸°í™”
- **ë°°ì¹˜ ë™ê¸°í™”**: ì—¬ëŸ¬ ëŒ€ìƒì„ í•œ ë²ˆì— ë™ê¸°í™”
- **ì„¤ì • ê´€ë¦¬**: JSON ê¸°ë°˜ ì„¤ì • íŒŒì¼ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥

---

## ğŸš€ ì„¤ì¹˜ ë° ì„¤ì •

### 1. íŒŒì¼ ë³µì‚¬

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ë‹¤ìŒ íŒŒì¼ë“¤ì„ ë³µì‚¬í•˜ì„¸ìš”:

```bash
# í•µì‹¬ ëª¨ë“ˆ ë³µì‚¬
cp -r modules/notion_sync/ YOUR_PROJECT/modules/notion_sync/
cp manage_notion.py YOUR_PROJECT/

# íŒŒì¼ êµ¬ì¡°
YOUR_PROJECT/
â”œâ”€â”€ modules/notion_sync/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py      # ë°ì´í„° ëª¨ë¸ (ì™„ì „ ë…ë¦½ì )
â”‚   â””â”€â”€ service.py     # ë™ê¸°í™” ì—”ì§„ (ë²”ìš© ì„¤ê³„)
â””â”€â”€ manage_notion.py   # CLI ë„êµ¬ (ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥)
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install click httpx pydantic
```

### 3. Notion API í† í° ì„¤ì •

#### ë°©ë²• 1: í™˜ê²½ë³€ìˆ˜

```bash
export NOTION_TOKEN="secret_your_notion_integration_token"
```

#### ë°©ë²• 2: .env íŒŒì¼

```bash
echo "NOTION_TOKEN=secret_your_notion_integration_token" >> .env
```

### 4. Notion API í† í° ë°œê¸‰ ë°©ë²•

1. [Notion ê°œë°œì í¬í„¸](https://www.notion.so/my-integrations) ì ‘ì†
2. "New integration" í´ë¦­
3. í†µí•© ì´ë¦„ ì…ë ¥ ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„ íƒ
4. "Submit" í´ë¦­í•˜ì—¬ í† í° ë°œê¸‰
5. ë™ê¸°í™”í•  í˜ì´ì§€/ë°ì´í„°ë² ì´ìŠ¤ì— í†µí•© ê¶Œí•œ ë¶€ì—¬

---

## ğŸ¯ ê¸°ë³¸ ì‚¬ìš©ë²•

### CLI ë„êµ¬ ì‚¬ìš©

#### 1. ì—°ê²° í…ŒìŠ¤íŠ¸

```bash
python manage_notion.py test-connection
```

#### 2. í˜ì´ì§€ ì¶”ê°€ ë° ë™ê¸°í™”

```bash
# í˜ì´ì§€ë¥¼ ë™ê¸°í™” ëŒ€ìƒì— ì¶”ê°€
python manage_notion.py add-page PAGE_ID \
  --name "í”„ë¡œì íŠ¸ ë¬¸ì„œ" \
  --output "docs/project.md" \
  --format markdown

# ë™ê¸°í™” ì‹¤í–‰
python manage_notion.py sync
```

#### 3. ë°ì´í„°ë² ì´ìŠ¤ ì¶”ê°€ ë° ë™ê¸°í™”

```bash
# ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë™ê¸°í™” ëŒ€ìƒì— ì¶”ê°€
python manage_notion.py add-database DATABASE_ID \
  --name "ì‘ì—… ëª©ë¡" \
  --output "docs/tasks.md" \
  --format markdown

# ê´€ê³„ í•„í„°ë§ê³¼ í•¨ê»˜ ë°ì´í„°ë² ì´ìŠ¤ ì¶”ê°€
python manage_notion.py add-database DATABASE_ID \
  --name "ìƒì„¸ì„¤ê³„ì„œ" \
  --output "docs/design.md" \
  --filter-by "í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„°:21c18a4c52a1804ba78ddbcc2ba649d4"

# ë™ê¸°í™” ì‹¤í–‰
python manage_notion.py sync
```

#### 4. ê³„ì¸µ êµ¬ì¡° ìë™ ë°œê²¬

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ê´€ê³„ íƒìƒ‰
python manage_notion.py discover-hierarchy DATABASE_ID --max-depth 3

# ë°œê²¬ëœ êµ¬ì¡°ë¥¼ ìë™ìœ¼ë¡œ ë™ê¸°í™” ëŒ€ìƒì— ì¶”ê°€
python manage_notion.py discover-hierarchy DATABASE_ID --auto-add
```

#### 5. ë¹ ë¥¸ ë™ê¸°í™” (ì„¤ì • íŒŒì¼ ì—†ì´)

```bash
# ë‹¨ì¼ í˜ì´ì§€ ì¦‰ì‹œ ë™ê¸°í™”
python manage_notion.py quick-page PAGE_ID output.md

# ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ ì¦‰ì‹œ ë™ê¸°í™”
python manage_notion.py quick-database DATABASE_ID database.md
```

### í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì‚¬ìš©

#### 1. ë¹ ë¥¸ ë™ê¸°í™”

```python
import asyncio
from modules.notion_sync.service import quick_sync_page, quick_sync_database
from modules.notion_sync.models import ContentFormat

async def main():
    # í˜ì´ì§€ ë™ê¸°í™”
    success = await quick_sync_page(
        notion_token="your_token",
        page_id="page_id_here",
        output_file="output.md",
        format=ContentFormat.MARKDOWN
    )
    
    # ë°ì´í„°ë² ì´ìŠ¤ ë™ê¸°í™”
    success = await quick_sync_database(
        notion_token="your_token", 
        database_id="database_id_here",
        output_file="database.md",
        format=ContentFormat.MARKDOWN
    )

asyncio.run(main())
```

#### 2. ê³ ê¸‰ ì„¤ì • ì‚¬ìš©

```python
import asyncio
from modules.notion_sync.service import UniversalNotionSyncEngine, ConfigurationManager
from modules.notion_sync.models import (
    NotionCredentials, SyncConfiguration, SyncTarget,
    ContentFormat, SyncStrategy
)

async def main():
    # ì„¤ì • ìƒì„±
    credentials = NotionCredentials(token="your_token")
    config = SyncConfiguration(credentials=credentials)
    
    # ë™ê¸°í™” ëŒ€ìƒ ì¶”ê°€ (ê´€ê³„ í•„í„°ë§ í¬í•¨)
    target = SyncTarget(
        id="database_id_here",
        type="database",
        name="ìƒì„¸ì„¤ê³„ì„œ",
        output_path="docs/design.md",
        format=ContentFormat.MARKDOWN,
        strategy=SyncStrategy.INCREMENTAL,
        relation_filter={"í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„°": "21c18a4c52a1804ba78ddbcc2ba649d4"}
    )
    config.add_target(target)
    
    # ì—”ì§„ ìƒì„± ë° ë™ê¸°í™”
    engine = UniversalNotionSyncEngine(config)
    result = await engine.sync_target(target)
    
    print(f"ë™ê¸°í™” ê²°ê³¼: {result.success}")
    
    # ì„¤ì • ì €ì¥ (ì¬ì‚¬ìš© ê°€ëŠ¥)
    config_manager = ConfigurationManager("my_sync_config.json")
    config_manager.save_configuration(config)

asyncio.run(main())
```

---

## ğŸ”§ ê³ ê¸‰ ê¸°ëŠ¥

### 1. ê´€ê³„ ê¸°ë°˜ í•„í„°ë§

íŠ¹ì • í˜ì´ì§€ì™€ ê´€ë ¨ëœ ë°ì´í„°ë§Œ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# CLIì—ì„œ ê´€ê³„ í•„í„°ë§
python manage_notion.py add-database DATABASE_ID \
  --name "ê´€ë ¨ ë¬¸ì„œë“¤" \
  --output "docs/related.md" \
  --filter-by "í”„ë¡œì íŠ¸:PAGE_ID"
```

```python
# í”„ë¡œê·¸ë˜ë° ë°©ì‹
target = SyncTarget(
    id="database_id",
    type="database",
    name="í•„í„°ëœ DB",
    output_path="filtered.md",
    relation_filter={
        "í”„ë¡œì íŠ¸ ë§ˆìŠ¤í„°": "21c18a4c52a1804ba78ddbcc2ba649d4",
        "ë‹´ë‹¹ì": "user_page_id"
    }
)
```

### 2. ì‚¬ìš©ì ì •ì˜ ë³€í™˜ í•¨ìˆ˜

í”„ë¡œì íŠ¸ë³„ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ë³€í™˜ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
def cursor_rules_transformer(notion_data, target):
    """Cursor Rules í˜•ì‹ìœ¼ë¡œ ë³€í™˜"""
    markdown = notion_data.to_markdown()
    
    return f"""name: {target.name.lower().replace(' ', '-')}
alwaysApply: true
content: |
{_indent_content(markdown, 2)}
  
  ---
  **ğŸ”„ Last Synced**: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')} UTC
  **ğŸ“ Source**: [Notion Document]({notion_data.url})
"""

def _indent_content(content, spaces):
    indent = " " * spaces
    return "\n".join(f"{indent}{line}" for line in content.split("\n"))

# ì—”ì§„ì— ë“±ë¡
engine.register_transformer("cursor_rules", cursor_rules_transformer)

# ì‚¬ìš©
target = SyncTarget(
    id="page_id",
    type="page", 
    name="Architecture Rules",
    output_path=".cursor/rules/architecture.mdc",
    custom_transformer="cursor_rules"
)
```

### 3. ë°°ì¹˜ ë™ê¸°í™”

```python
async def batch_sync():
    engine = await create_notion_sync_engine("your_token")
    
    # ì—¬ëŸ¬ ëŒ€ìƒ ì¶”ê°€
    targets = [
        SyncTarget(id="page1", type="page", name="Doc1", output_path="doc1.md"),
        SyncTarget(id="page2", type="page", name="Doc2", output_path="doc2.md"),
        SyncTarget(id="db1", type="database", name="DB1", output_path="db1.md"),
    ]
    
    for target in targets:
        engine.config.add_target(target)
    
    # ë°°ì¹˜ ë™ê¸°í™” ì‹¤í–‰
    batch_result = await engine.sync_all_targets()
    
    print(f"ì„±ê³µë¥ : {batch_result.success_rate:.2%}")
    print(f"ì†Œìš” ì‹œê°„: {batch_result.duration_seconds:.2f}ì´ˆ")
```

### 4. ì„¤ì • íŒŒì¼ ê´€ë¦¬

```python
from modules.notion_sync.service import ConfigurationManager

# ì„¤ì • ì €ì¥
config_manager = ConfigurationManager("my_config.json")
config_manager.save_configuration(config)

# ì„¤ì • ë¡œë“œ
loaded_config = config_manager.load_configuration()

# CLIì—ì„œ íŠ¹ì • ì„¤ì • íŒŒì¼ ì‚¬ìš©
python manage_notion.py --config my_config.json sync
```

---

## ğŸ“š API ë ˆí¼ëŸ°ìŠ¤

### ì£¼ìš” í´ë˜ìŠ¤

#### `UniversalNotionSyncEngine`

í•µì‹¬ ë™ê¸°í™” ì—”ì§„

```python
class UniversalNotionSyncEngine:
    def __init__(self, config: SyncConfiguration)
    
    async def sync_target(self, target: SyncTarget) -> SyncResult
    async def sync_all_targets(self) -> BatchSyncResult
    async def discover_and_add_hierarchy(self, root_database_id: str) -> List[SyncTarget]
    
    def register_transformer(self, name: str, transformer: Callable)
```

#### `SyncTarget`

ë™ê¸°í™” ëŒ€ìƒ ì •ì˜

```python
@dataclass
class SyncTarget:
    id: str                         # í˜ì´ì§€/ë°ì´í„°ë² ì´ìŠ¤ ID
    type: str                       # "page" ë˜ëŠ” "database"
    name: str                       # ì‹ë³„ìš© ì´ë¦„
    output_path: str                # ì¶œë ¥ íŒŒì¼ ê²½ë¡œ
    format: ContentFormat           # ì¶œë ¥ í˜•ì‹
    strategy: SyncStrategy          # ë™ê¸°í™” ì „ëµ
    custom_transformer: str         # ì‚¬ìš©ì ì •ì˜ ë³€í™˜ í•¨ìˆ˜ëª…
    relation_filter: Dict[str, str] # ê´€ê³„ ê¸°ë°˜ í•„í„°ë§
    last_sync: Optional[datetime]   # ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„
```

#### `SyncConfiguration`

ì „ì²´ ë™ê¸°í™” ì„¤ì •

```python
@dataclass 
class SyncConfiguration:
    credentials: NotionCredentials
    targets: List[SyncTarget]
    output_base_path: str
    relation_discovery: RelationDiscoveryMode
    max_hierarchy_depth: int
    batch_size: int
```

### í¸ì˜ í•¨ìˆ˜

```python
# ê°„í¸í•œ ë™ê¸°í™”
async def quick_sync_page(token: str, page_id: str, output_file: str, format: ContentFormat) -> bool
async def quick_sync_database(token: str, database_id: str, output_file: str, format: ContentFormat) -> bool

# ì—”ì§„ ìƒì„±
async def create_notion_sync_engine(token: str, output_path: str, config_file: str) -> UniversalNotionSyncEngine
```

### CLI ëª…ë ¹ì–´

```bash
# ëŒ€ìƒ ê´€ë¦¬
python manage_notion.py add-page PAGE_ID --name "ì´ë¦„" --output "íŒŒì¼.md"
python manage_notion.py add-database DB_ID --name "ì´ë¦„" --output "íŒŒì¼.md" --filter-by "ì†ì„±:ê°’"
python manage_notion.py list-targets
python manage_notion.py remove TARGET_ID

# ë™ê¸°í™”
python manage_notion.py sync [--target TARGET_NAME]
python manage_notion.py quick-page PAGE_ID output.md
python manage_notion.py quick-database DB_ID output.md

# íƒìƒ‰ ë° í…ŒìŠ¤íŠ¸
python manage_notion.py discover-hierarchy DB_ID [--auto-add]
python manage_notion.py test-connection
```

---

## ğŸ’¼ ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

### ì˜ˆì‹œ 1: ê°œë°œ ë¬¸ì„œ ë™ê¸°í™”

```python
# sync_docs.py
import asyncio
from modules.notion_sync.service import create_notion_sync_engine
from modules.notion_sync.models import SyncTarget, ContentFormat

async def sync_development_docs():
    """ê°œë°œ ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ë™ê¸°í™”"""
    engine = await create_notion_sync_engine(
        notion_token="your_token",
        output_base_path="./docs/",
        config_file="dev_docs_config.json"
    )
    
    # ë¬¸ì„œ ëª©ë¡ ì •ì˜
    docs = [
        {
            "id": "architecture_page_id",
            "name": "Architecture", 
            "output": "architecture.md"
        },
        {
            "id": "api_spec_page_id",
            "name": "API Specification",
            "output": "api/spec.md"
        },
        {
            "id": "tasks_db_id",
            "name": "Task Database",
            "output": "tasks.md",
            "type": "database",
            "filter": {"í”„ë¡œì íŠ¸": "current_project_id"}
        }
    ]
    
    # ëŒ€ìƒ ì¶”ê°€
    for doc in docs:
        target = SyncTarget(
            id=doc["id"],
            type=doc.get("type", "page"),
            name=doc["name"],
            output_path=doc["output"],
            format=ContentFormat.MARKDOWN,
            relation_filter=doc.get("filter")
        )
        engine.config.add_target(target)
    
    # ë™ê¸°í™” ì‹¤í–‰
    result = await engine.sync_all_targets()
    print(f"ë™ê¸°í™” ì™„ë£Œ: {result.successful_syncs}/{result.total_targets}")

if __name__ == "__main__":
    asyncio.run(sync_development_docs())
```

### ì˜ˆì‹œ 2: í”„ë¡œì íŠ¸ë³„ ê·œì¹™ ìƒì„±

```python
# generate_rules.py
import asyncio
from datetime import datetime
from modules.notion_sync.service import create_notion_sync_engine
from modules.notion_sync.models import SyncTarget

def project_rules_transformer(notion_data, target):
    """í”„ë¡œì íŠ¸ ê·œì¹™ í˜•ì‹ìœ¼ë¡œ ë³€í™˜"""
    content = notion_data.to_markdown()
    
    return f"""# {target.name}

> **ğŸ“ ì¶œì²˜**: [Notion ë¬¸ì„œ]({notion_data.url})  
> **ğŸ”„ ìµœì¢… ì—…ë°ì´íŠ¸**: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}

{content}

---
*ì´ ë¬¸ì„œëŠ” Notionì—ì„œ ìë™ ë™ê¸°í™”ë©ë‹ˆë‹¤.*
"""

async def generate_project_rules():
    engine = await create_notion_sync_engine("your_token", "./rules/")
    engine.register_transformer("project_rules", project_rules_transformer)
    
    # í”„ë¡œì íŠ¸ ë¬¸ì„œë“¤
    project_pages = [
        ("coding_standards_id", "ì½”ë”© í‘œì¤€", "coding-standards.md"),
        ("architecture_id", "ì•„í‚¤í…ì²˜ ê°€ì´ë“œ", "architecture.md"),
        ("deployment_id", "ë°°í¬ ê°€ì´ë“œ", "deployment.md"),
    ]
    
    for page_id, name, output in project_pages:
        target = SyncTarget(
            id=page_id,
            type="page",
            name=name,
            output_path=output,
            custom_transformer="project_rules"
        )
        engine.config.add_target(target)
    
    await engine.sync_all_targets()

asyncio.run(generate_project_rules())
```

### ì˜ˆì‹œ 3: ê³„ì¸µì  ë¬¸ì„œ êµ¬ì¡° ë™ê¸°í™”

```python
# sync_hierarchy.py
import asyncio
from modules.notion_sync.service import create_notion_sync_engine

async def sync_project_hierarchy():
    """í”„ë¡œì íŠ¸ ì „ì²´ ê³„ì¸µ êµ¬ì¡° ë™ê¸°í™”"""
    engine = await create_notion_sync_engine(
        notion_token="your_token", 
        output_base_path="./docs/",
        config_file="hierarchy_config.json"
    )
    
    # ë£¨íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‹œì‘í•˜ì—¬ ì „ì²´ êµ¬ì¡° ë°œê²¬
    root_database_id = "project_master_db_id"
    discovered = await engine.discover_and_add_hierarchy(root_database_id)
    
    print(f"ë°œê²¬ëœ ë¬¸ì„œ: {len(discovered)}ê°œ")
    for target in discovered:
        print(f"  - {target.name} ({target.type})")
    
    # ì „ì²´ ë™ê¸°í™”
    result = await engine.sync_all_targets()
    print(f"\në™ê¸°í™” ê²°ê³¼: {result.successful_syncs}/{result.total_targets} ì„±ê³µ")

asyncio.run(sync_project_hierarchy())
```

---

## ğŸ›  ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

#### 1. "Unauthorized" ì˜¤ë¥˜

```
í•´ê²°: Notion API í† í° í™•ì¸
- í† í°ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
- í˜ì´ì§€/ë°ì´í„°ë² ì´ìŠ¤ì— í†µí•© ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
```

#### 2. "Object not found" ì˜¤ë¥˜

```
í•´ê²°: ID ë° ê¶Œí•œ í™•ì¸
- í˜ì´ì§€/ë°ì´í„°ë² ì´ìŠ¤ IDê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
- í•´ë‹¹ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
- í†µí•©ì— ì½ê¸° ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
```

#### 3. í…Œì´ë¸”ì´ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ

```
í•´ê²°: ë¸”ë¡ ì²˜ë¦¬ í™•ì¸
- í˜„ì¬ ëª¨ë“  í…Œì´ë¸” ë¸”ë¡ íƒ€ì… ì§€ì›ë¨ âœ…
- íŒŒì´í”„ ë¬¸ì ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬ë¨ âœ…
- í—¤ë” í–‰ê³¼ ë°ì´í„° í–‰ êµ¬ë¶„ ì²˜ë¦¬ë¨ âœ…
```

#### 4. ê´€ê³„ í•„í„°ê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

```
í•´ê²°: í•„í„° ì„¤ì • í™•ì¸
- ì†ì„±ëª…ì´ ì •í™•í•œì§€ í™•ì¸
- ëŒ€ìƒ í˜ì´ì§€ IDê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
- ê´€ê³„ ì†ì„±ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
```

### ë””ë²„ê¹… íŒ

#### 1. ë¡œê¹… í™œì„±í™”

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

#### 2. ì—°ê²° í…ŒìŠ¤íŠ¸

```bash
python manage_notion.py test-connection
```

#### 3. ë‹¨ì¼ í˜ì´ì§€ í…ŒìŠ¤íŠ¸

```bash
python manage_notion.py quick-page PAGE_ID test_output.md
```

#### 4. ì„¤ì • í™•ì¸

```bash
python manage_notion.py list-targets
```

### ì„±ëŠ¥ ìµœì í™”

#### 1. ì¦ë¶„ ë™ê¸°í™” ì‚¬ìš©

```python
target.strategy = SyncStrategy.INCREMENTAL  # ë³€ê²½ëœ ë‚´ìš©ë§Œ ë™ê¸°í™”
```

#### 2. ë°°ì¹˜ í¬ê¸° ì¡°ì •

```python
config.batch_size = 50  # í•œ ë²ˆì— ì²˜ë¦¬í•  í•­ëª© ìˆ˜
```

#### 3. ê´€ê³„ ë°œê²¬ ê¹Šì´ ì œí•œ

```python
config.max_hierarchy_depth = 3  # íƒìƒ‰ ê¹Šì´ ì œí•œ
```

---

## ğŸ“ ì§€ì›ë˜ëŠ” ë…¸ì…˜ ë¸”ë¡ íƒ€ì…

### ì™„ì „ ì§€ì› (âœ…)
- **í…ìŠ¤íŠ¸**: paragraph, heading_1~3, bulleted_list_item, numbered_list_item
- **ì„œì‹**: code, quote, callout, toggle, divider
- **í…Œì´ë¸”**: table, table_row (ë§ˆí¬ë‹¤ìš´ í…Œì´ë¸”ë¡œ ì™„ë²½ ë³€í™˜)
- **Rich Text**: ë³¼ë“œ, ì´íƒ¤ë¦­, ì½”ë“œ, ë§í¬

### íŠ¹ìˆ˜ ì²˜ë¦¬
- **íŒŒì´í”„ ë¬¸ì**: `|` â†’ `\|` ìë™ ì´ìŠ¤ì¼€ì´í”„
- **í…Œì´ë¸” êµ¬ì¡°**: í—¤ë”ì™€ ë°ì´í„° í–‰ ìë™ êµ¬ë¶„
- **ì¤‘ì²© ë¸”ë¡**: ìì‹ ë¸”ë¡ ì¬ê·€ì  ì²˜ë¦¬

---

## ğŸ“ˆ ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ê´€ë ¨ ë¬¸ì„œ

- [Notion API ê³µì‹ ë¬¸ì„œ](https://developers.notion.com/)
- [Notion í†µí•© ê°€ì´ë“œ](https://developers.notion.com/docs/getting-started)

### ì˜ˆì œ í”„ë¡œì íŠ¸ êµ¬ì¡°

```bash
my_project/
â”œâ”€â”€ modules/notion_sync/     # ë³µì‚¬ëœ ë™ê¸°í™” ëª¨ë“ˆ
â”œâ”€â”€ manage_notion.py         # CLI ë„êµ¬
â”œâ”€â”€ sync_docs.py            # ì‚¬ìš©ì ì •ì˜ ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ notion_sync_config.json # ë™ê¸°í™” ì„¤ì • íŒŒì¼
â”œâ”€â”€ docs/                   # ë™ê¸°í™”ëœ ë¬¸ì„œ ì¶œë ¥
â””â”€â”€ .env                    # í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```

### ì„¤ì • íŒŒì¼ ì˜ˆì‹œ

```json
{
  "credentials": {
    "token": "secret_your_token",
    "version": "2022-06-28"
  },
  "targets": [
    {
      "id": "page_id",
      "type": "page",
      "name": "í”„ë¡œì íŠ¸ ë¬¸ì„œ",
      "output_path": "docs/project.md",
      "format": "markdown",
      "strategy": "incremental"
    },
    {
      "id": "database_id",
      "type": "database", 
      "name": "ì‘ì—… ëª©ë¡",
      "output_path": "docs/tasks.md",
      "format": "markdown",
      "relation_filter": {
        "í”„ë¡œì íŠ¸": "project_page_id"
      }
    }
  ]
}
```

---

**ì´ì œ ì™„ì „íˆ ë…ë¦½ì ì¸ ë²”ìš© Notion ë™ê¸°í™” ëª¨ë“ˆì„ ììœ ë¡­ê²Œ í™œìš©í•˜ì„¸ìš”!** ğŸš€ 

**ğŸ¯ í•µì‹¬ íŠ¹ì§•**: 
- âœ… í…Œì´ë¸” ì²˜ë¦¬ ì™„ë²½ êµ¬í˜„
- âœ… ê´€ê³„ ê¸°ë°˜ í•„í„°ë§ ì§€ì›  
- âœ… í”„ë¡œì íŠ¸ ë…ë¦½ì  ì„¤ê³„
- âœ… CLIì™€ í”„ë¡œê·¸ë˜ë° API ëª¨ë‘ ì œê³µ 